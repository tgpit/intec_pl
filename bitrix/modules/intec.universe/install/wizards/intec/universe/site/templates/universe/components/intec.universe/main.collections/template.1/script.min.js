!function(){"use strict";if(window.MainCollectionsNavigation)return!1;var t=template.getLibrary("_");window.MainCollectionsNavigation=function(){this.active=!1,this.component={path:null,template:null,parameters:{}},this.navigation={id:null,current:1,count:1},this.container={root:null,items:null,button:null}},MainCollectionsNavigation.prototype={init:function(t){return this.setParameters(t),!!this.checkParameters()&&(!!this.setContainers()&&(this.configure(),void this.bindAction()))},setParameters:function(n){return!t.isEmpty(n)&&(!t.isEmpty(n.component)&&(!t.isEmpty(n.navigation)&&(!t.isEmpty(n.container)&&(t.isEmpty(n.component.path)||(this.component.path=n.component.path),t.isEmpty(n.component.template)||(this.component.template=n.component.template),t.isEmpty(n.component.parameters)||(this.component.parameters=n.component.parameters),t.isEmpty(n.navigation.id)||(this.navigation.id=n.navigation.id),t.isInteger(n.navigation.current)&&n.navigation.current>0?this.navigation.current=n.navigation.current:this.navigation.current=1,t.isInteger(n.navigation.count)&&n.navigation.count>1?this.navigation.count=n.navigation.count:this.navigation.count=1,t.isEmpty(n.container.root)||(this.container.root=n.container.root),t.isEmpty(n.container.items)||(this.container.items=n.container.items),void(t.isEmpty(n.container.button)||(this.container.button=n.container.button))))))},checkParameters:function(){for(var n in this.component)if(t.isEmpty(this.component[n]))return!1;for(var n in this.container)if(t.isEmpty(this.container[n]))return!1;if(!t.isEmpty(this.navigation.id))return this.navigation.current<this.navigation.count},setContainers:function(){return this.container.root=document.querySelector(this.container.root),null!==this.container.root&&(this.container.items=this.container.root.querySelector(this.container.items),null!==this.container.items&&(this.container.button=this.container.root.querySelector(this.container.button),null!==this.container.button))},isActive:function(){return this.active=this.navigation.current<this.navigation.count,this.active},buttonSetState:function(t){this.container.button.setAttribute("data-state",t)},buttonIsActive:function(){return"active"===this.container.button.getAttribute("data-state")},itemsSetState:function(t){this.container.items.setAttribute("data-state",t)},configure:function(){this.isActive()?this.buttonSetState("active"):this.buttonSetState("disabled"),this.itemsSetState("none")},bindAction:function(){this.container.button.addEventListener("click",BX.delegate(function(){this.actionClick()},this))},setUrl:function(){var t;return t=this.navigation.current+1,this.component.path+"?"+this.navigation.id+"=page-"+t},actionClick:function(){if(!this.active||!this.buttonIsActive())return!1;this.buttonSetState("processing"),this.itemsSetState("processing"),BX.ajax({url:this.setUrl(),method:"POST",dataType:"json",timeout:60,cache:!0,data:{action:"navigation",template:this.component.template,parameters:this.component.parameters},onsuccess:BX.delegate(function(t){this.actionSuccess(t),this.configure()},this),onfailure:BX.delegate(function(){this.configure()},this)})},actionSuccess:function(t){null!==t.items&&(this.container.items.insertAdjacentHTML("beforeend",t.items),this.navigation.current++)}}}();