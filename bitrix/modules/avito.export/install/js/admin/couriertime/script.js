this.BX=this.BX||{},this.BX.AvitoExport=this.BX.AvitoExport||{},function(t){"use strict";var e;const n=null!=(e=window.AvitoJQuery)?e:window.$;class s{constructor(t,e={}){this.$el=n(t),this.el=this.$el[0],this.options=Object.assign({},this.constructor.defaults,this.$el.data(),e)}destroy(){this.el=null}getElement(t,e,n){const s=this.getElementSelector(t);return this.getNode(s,e,n||"find")}getElementSelector(t){const e=t+"Element";return this.options[e]}getTemplate(t){const e=t+"Template",n=this.options[e],s=n.substring(0,1);let i;return i="."===s||"#"===s?this.getNode(n).html():n,i}getNode(t,e,s="find"){return"#"===t.substring(0,1)?e=n(document):e||(e=this.$el),e[s](t)}getLang(t,e){let n,s;return null!=this.options.lang&&t in this.options.lang?s=this.options.lang[t]:(n=this.options.langPrefix+t,s=BX.message(n)||""),s&&e&&(s=function(t,e){let n=t;for(const t in e){if(!e.hasOwnProperty(t))continue;const s="#"+t+"#",i=e[t];do{n=n.replace(s,i)}while(-1!==n.indexOf(s))}return n}(s,e)),s}}var i;s.defaults={lang:{},langPrefix:null};const o=null!=(i=window.AvitoJQuery)?i:window.$;class r extends s{constructor(t,e={}){super(t,e),this.onCourierTime=(t,e)=>{const n=this.dateOptions(e.options);null==n?this.resetTime():this.timeOptions(n.INTERVALS)},this.onAddressReset=()=>{this.resetDate(),this.resetTime()},this.onDateChange=t=>{const e=this.searchIntervals(t.target.value);null==e?this.resetTime():this.timeOptions(e)},this.bind()}bind(){const t=this.eventAnchor(),e=this.getElement("date");t.on("avitoCourierTime",this.onCourierTime),t.on("avitoCourierAddressReset",this.onAddressReset),e.on("change",this.onDateChange)}dateOptions(t){const e=this.getElement("date"),n=e.val(),s=this.searchOption(t,n);return e.prop("disabled",!1),e.empty(),this.renderPlaceholder(e,this.getLang("CHOOSE_DATE"),null!=s),this.renderOptions(e,t,n),this._dateOptions=t,s}resetDate(){const t=this.getElement("date");t.prop("disabled",!0),t.find("option").prop("selected",!1),this.renderPlaceholder(t,this.getLang("INPUT_ADDRESS"))}searchIntervals(t){const e=this.searchOption(this._dateOptions,t);return null==e?void 0:e.INTERVALS}searchOption(t,e){if(null==e||""===e)return null;let n=null;for(const s of t)if(s.ID===e){n=s;break}return n}timeOptions(t){const e=this.getElement("time"),n=e.val(),s=this.searchOption(t,n);return e.prop("disabled",!1),e.empty(),this.renderPlaceholder(e,this.getLang("CHOOSE_TIME"),null!=s),this.renderOptions(e,t,n),s}resetTime(){const t=this.getElement("time");t.prop("disabled",!0),t.find("option").prop("selected",!1),this.renderPlaceholder(t,"")}renderPlaceholder(t,e,n=!1){const s=document.createElement("option");s.value="",s.textContent=e,s.disabled=!0,s.selected=!n,t.append(s)}renderOptions(t,e,n=null){for(const s of e){const e=document.createElement("option");e.value=s.ID,e.textContent=s.VALUE,e.selected=s.ID===n,t.append(e)}}eventAnchor(){const t=this.$el.closest("form");return t.length>0?t:o(document)}}r.defaults={dateElement:'[data-entity="date"]',timeElement:'[data-entity="time"]',lang:{},langPrefix:"AVITO_EXPORT_ADMIN_COURIER_TIME_"},t.CourierTime=r}(this.BX.AvitoExport.Admin=this.BX.AvitoExport.Admin||{});
//# sourceMappingURL=script.js.map
