{"version":3,"file":"script.js","sources":["../../plugin/utils.js","../../plugin/skeleton.js","src/httperror.js","src/parseerror.js","src/index.js"],"sourcesContent":["// @flow\r\n\r\nexport function compileTemplate(template: string, replaces: Object) {\r\n\tlet result = template;\r\n\r\n\tfor (const key in replaces) {\r\n\t\tif (!replaces.hasOwnProperty(key)) { continue; }\r\n\r\n\t\tconst replaceKey = '#' + key + '#';\r\n\t\tconst replaceValue = replaces[key];\r\n\r\n\t\tdo {\r\n\t\t\tresult = result.replace(replaceKey, replaceValue);\r\n\t\t} while (result.indexOf(replaceKey) !== -1);\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\nexport function htmlToElement(html, tag = 'div') {\r\n\tconst renderer = document.createElement(tag);\r\n\r\n\trenderer.innerHTML = html;\r\n\r\n\treturn renderer.firstElementChild;\r\n}","import {compileTemplate} from \"./utils\";\r\n\r\n// noinspection JSUnresolvedVariable\r\nconst $ = window.AvitoJQuery ?? window.$;\r\n\r\nexport class Skeleton {\r\n\r\n\tstatic defaults = {\r\n\t\tlang: {},\r\n\t\tlangPrefix: null\r\n\t};\r\n\r\n\tconstructor(element: HTMLElement, options: Object = {}) {\r\n\t\tthis.$el = $(element);\r\n\t\tthis.el = this.$el[0];\r\n\t\tthis.options = Object.assign({}, this.constructor.defaults, this.$el.data(), options);\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.el = null;\r\n\t}\r\n\t\r\n\tgetElement(key, context, method) : JQuery {\r\n\t\tconst selector = this.getElementSelector(key);\r\n\t\r\n\t\treturn this.getNode(selector, context, method || 'find');\r\n\t}\r\n\t\r\n\tgetElementSelector(key: string) : string {\r\n\t\tconst optionKey = key + 'Element';\r\n\t\r\n\t\treturn this.options[optionKey];\r\n\t}\r\n\t\r\n\tgetTemplate(key: string) : string {\r\n\t\tconst optionKey = key + 'Template';\r\n\t\tconst option = this.options[optionKey];\r\n\t\tconst optionFirstSymbol = option.substring(0, 1);\r\n\t\tlet result;\r\n\t\r\n\t\tif (optionFirstSymbol === '.' || optionFirstSymbol === '#') {\r\n\t\t\tresult = this.getNode(option).html();\r\n\t\t} else {\r\n\t\t\tresult = option;\r\n\t\t}\r\n\t\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\tgetNode(selector, context, method = 'find') : JQuery {\r\n\t\tif (selector.substring(0, 1) === '#') { // is id query\r\n\t\t\tcontext = $(document);\r\n\t\t} else if (!context) {\r\n\t\t\tcontext = this.$el;\r\n\t\t}\r\n\t\r\n\t\treturn context[method](selector);\r\n\t}\r\n\t\r\n\tgetLang(key, replaces) : string {\r\n\t\tlet langKey;\r\n\t\tlet result;\r\n\t\r\n\t\tif (this.options.lang != null && key in this.options.lang) {\r\n\t\t\tresult = this.options.lang[key];\r\n\t\t} else {\r\n\t\t\tlangKey = this.options.langPrefix + key;\r\n\t\t\tresult = BX.message(langKey) || '';\r\n\t\t}\r\n\t\r\n\t\tif (result && replaces) {\r\n\t\t\tresult = compileTemplate(result, replaces);\r\n\t\t}\r\n\t\r\n\t\treturn result;\r\n\t}\r\n}\r\n","export class HttpError extends Error {\r\n\r\n\tconstructor(message: string, response: string) {\r\n\t\tsuper(message);\r\n\r\n\t\tthis.response = response;\r\n\t}\r\n\r\n}","export  class ParseError extends Error {\r\n\r\n\tconstructor(\r\n\t\terror: Error,\r\n\t\tresponse: string,\r\n    ) {\r\n\t\tsuper(error.message);\r\n\t\tthis.response = response;\r\n\t\tthis.previousError = error;\r\n\t}\r\n\r\n}","// @flow\r\n\r\nimport {Skeleton} from \"../../../plugin/skeleton\";\r\nimport {compileTemplate} from \"../../../plugin/utils\";\r\nimport {HttpError} from \"./httperror\";\r\nimport {ParseError} from \"./parseerror\";\r\n\r\n// noinspection JSUnresolvedVariable\r\nconst $ = window.AvitoJQuery ?? window.$;\r\n\r\nexport class Runner extends Skeleton {\r\n\r\n\tstatic defaults = {\r\n\t\trunElement: '.js-export-form__run',\r\n\t\tstopElement: '.js-export-form__stop',\r\n\t\tcopyElement: '.js-export-copy_to_clipboard',\r\n\t\tlinkFileElement: '.js-link-file',\r\n\t\tmessageElement: '.js-export-form__message',\r\n\t\ttimerHolderElement: '.js-export-form__timer-holder',\r\n\t\ttimerElement: '.js-export-form__timer',\r\n\t\terrorTemplate: '<span>#TITLE#</span> <span>#MESSAGE#</span> <textarea>#DEBUG#</textarea>',\r\n\t\tlang: {\r\n\t\t\tCOPY_TO_BUFFER: 'The link is copied to the clipboard: ',\r\n\t\t\tJS_ERROR: 'JavaScript error',\r\n\t\t\tHTTP_ERROR: 'HTTP error',\r\n\t\t\tPARSE_ERROR: 'Response parse error',\r\n\t\t}\r\n\t}\r\n\t\r\n\tconstructor(element: HTMLElement, options: Object = {}) {\r\n\t\tsuper(element, options);\r\n\t\tthis.bind();\r\n\t\tthis.initVars();\r\n\t}\r\n\r\n\tinitVars() : void {\r\n\t\tthis._formData = null;\r\n\t\tthis._query = null;\r\n\r\n\t\tthis._queryTimeout = null;\r\n\t\tthis._state = null;\r\n\t\tthis._timerInterval = null;\r\n\t}\r\n\r\n\tbind() : void {\r\n\t\tthis.handleRunClick(true);\r\n\t\tthis.handleStopClick(true);\r\n\t}\r\n\r\n\tbindCopy() : void {\r\n\t\tthis.handleCopyClick(true);\r\n\t}\r\n\r\n\tunbind() : void {\r\n\t\tthis.handleRunClick(false);\r\n\t\tthis.handleStopClick(false);\r\n\t}\r\n\r\n\thandleRunClick(dir) : void {\r\n\t\tconst button = this.getElement('run');\r\n\r\n\t\tbutton[dir ? 'on' : 'off']('click', this.onRunClick);\r\n\t}\r\n\r\n\thandleStopClick(dir) : void {\r\n\t\tconst button = this.getElement('stop');\r\n\r\n\t\tbutton[dir ? 'on' : 'off']('click', this.onStopClick);\r\n\t}\r\n\r\n\thandleCopyClick(dir) : void {\r\n\t\tconst button = this.getElement('copy');\r\n\r\n\t\tbutton[dir ? 'on' : 'off']('click', this.onCopyClick);\r\n\t}\r\n\r\n\tonRunClick = (event) => {\r\n\t\tthis.toggleButtons(true);\r\n\t\tthis.showMessage();\r\n\t\tthis.startTimer();\r\n\t\tthis.query('run')\r\n\r\n\t\tevent.preventDefault();\r\n\t}\r\n\r\n\tonStopClick = (event) => {\r\n\t\tthis.query('stop');\r\n\r\n\t\tevent.preventDefault();\r\n\t}\r\n\r\n\tonCopyClick = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tconst link = event.currentTarget.previousElementSibling.value;\r\n\t\tnavigator.clipboard.writeText(link)\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.showMessageCopyLink(this.getLang('LINK_COPIED') + ' ' + link);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\tthrow err;\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tshowMessageCopyLink(text : string = '') : void {\r\n\t\talert(text);\r\n\t}\r\n\r\n\tquery(action : string) {\r\n\t\tthis.queryDelayedCancel();\r\n\t\tthis.queryAbort();\r\n\r\n\t\tthis._query = this.makeQuery(action);\r\n\r\n\t\t(new Promise((resolve, reject) => {\r\n\t\t\tthis._query.then(resolve, reject);\r\n\t\t}))\r\n\t\t\t.then(this.queryEnd, this.queryStop)\r\n\t\t\t.catch(this.queryError);\r\n\t}\r\n\r\n\tgetFormData() : Array {\r\n\t\tif (this._formData === null) {\r\n\t\t\tthis._formData = this.$el.serializeArray();\r\n\t\t}\r\n\r\n\t\treturn this._formData.slice();\r\n\t}\r\n\r\n\tclearFormData() : void {\r\n\t\tthis._formData = null;\r\n\t}\r\n\r\n\tgetState() : Object {\r\n\t\treturn this._state;\r\n\t}\r\n\r\n\tgetFormValue(field : string) : Array {\r\n\t\tconst formData = this.getFormData();\r\n\t\tlet result = [];\r\n\r\n\t\tfor (let i = formData.length - 1; i >= 0; i--) {\r\n\t\t\tif (formData[i].name === field) {\r\n\t\t\t\tresult = formData[i].value;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tsetState(state : Object) : void {\r\n\t\tthis._state = state;\r\n\t}\r\n\r\n\tclearState() : void {\r\n\t\tthis._state = null;\r\n\t}\r\n\r\n\tmakeQuery(action : string) : Object {\r\n\t\tconst state = this.getState();\r\n\t\t\r\n\t\tlet config = {\r\n\t\t\turl: this.$el.attr('action'),\r\n\t\t\ttype: 'post',\r\n\t\t\tdata: this.getFormData()\r\n\t\t};\r\n\r\n\t\tconfig.data.push({\r\n\t\t\tname: 'action',\r\n\t\t\tvalue: action\r\n\t\t});\r\n\r\n\t\tif (state !== null) {\r\n\t\t\tfor (let stateKey in state) {\r\n\t\t\t\tif (state.hasOwnProperty(stateKey)) {\r\n\t\t\t\t\tconfig.data.push({\r\n\t\t\t\t\t\tname: stateKey,\r\n\t\t\t\t\t\tvalue: state[stateKey]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn $.ajax(config);\r\n\t}\r\n\r\n\tshowMessage(text : string = '') : void {\r\n\t\tthis.getElement('message').html(text || '');\r\n\t}\r\n\r\n\tstartTimer() : void {\r\n\t\tconst timerElement = this.getElement('timer');\r\n\t\tconst timerHolderElement = this.getElement('timerHolder');\r\n\r\n\t\ttimerHolderElement.show();\r\n\t\ttimerElement.text('00:00');\r\n\r\n\t\tclearTimeout(this._timerInterval);\r\n\r\n\t\tthis._timerStart = new Date();\r\n\t\tthis._timerInterval = setTimeout(this.tickTimer, 1000);\r\n\t}\r\n\r\n\ttickTimer = () => {\r\n\t\tconst startDate = this._timerStart;\r\n\t\tconst timerElement = this.getElement('timer');\r\n\t\tconst nowDate = new Date();\r\n\t\tconst diff = (nowDate - startDate) / 1000;\r\n\t\tlet seconds = '' + parseInt(diff % 60, 10);\r\n\t\tlet minutes = '' + Math.floor(diff / 60);\r\n\r\n\t\tif (minutes.length === 1) {\r\n\t\t\tminutes = '0' + minutes;\r\n\t\t}\r\n\r\n\t\tif (seconds.length === 1) {\r\n\t\t\tseconds = '0' + seconds;\r\n\t\t}\r\n\r\n\t\ttimerElement.text(minutes + ':' + seconds);\r\n\r\n\t\tthis._timerInterval = setTimeout(this.tickTimer, 1000);\r\n\t}\r\n\r\n\tstopTimer() : void {\r\n\t\tclearTimeout(this._timerInterval);\r\n\t}\r\n\r\n\tqueryAbort() : void {\r\n\t\tif (this._query == null) { return; }\r\n\r\n\t\tthis._query.abort('manual');\r\n\t}\r\n\r\n\tqueryDelayed(action, delay) {\r\n\t\tthis.queryDelayedCancel();\r\n\r\n\t\tthis._queryTimeout = setTimeout(\r\n\t\t\t$.proxy(this.query, this, action),\r\n\t\t\t(parseInt(delay, 10) || 1) * 1000\r\n\t\t);\r\n\t}\r\n\r\n\tqueryDelayedCancel() : void {\r\n\t\tclearTimeout(this._queryTimeout);\r\n\t}\r\n\r\n\tqueryEnd = (response: string) : void => {\r\n\t\tconst data = this.parseResponse(response);\r\n\r\n\t\tthis._query = null;\r\n\r\n\t\tthis.showMessage(data.message);\r\n\r\n\t\tswitch (data.status) {\r\n\t\t\tcase 'progress':\r\n\t\t\t\tthis.queryDelayed('run', this.getFormValue('TIME_SLEEP'));\r\n\t\t\t\tthis.setState(data.state);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tif (data.status === 'ok') {\r\n\t\t\t\t\tthis.bindCopy();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.clearFormData();\r\n\t\t\t\tthis.clearState();\r\n\t\t\t\tthis.stopTimer();\r\n\t\t\t\tthis.toggleButtons(false);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tqueryStop = (xhr, textStatus: string, errorThrown: string) : void => {\r\n\t\tthis._query = null;\r\n\r\n\t\tif ((textStatus ?? xhr.statusText) === 'manual') { return; }\r\n\r\n\t\tif (xhr.status !== 200) {\r\n\t\t\tthrow new HttpError(`HTTP ${xhr.status}`, xhr.responseText);\r\n\t\t}\r\n\r\n\t\tthrow new HttpError(errorThrown || textStatus, xhr.responseText);\r\n\t}\r\n\r\n\tqueryError = (error: Error) : void => {\r\n\t\tconst template = this.getTemplate('error');\r\n\t\tlet variables;\r\n\r\n\t\tif (error instanceof ParseError) {\r\n\t\t\tvariables = {\r\n\t\t\t\t'TITLE': this.getLang('PARSE_ERROR'),\r\n\t\t\t\t'MESSAGE': error.previousError.message,\r\n\t\t\t\t'DEBUG': BX.util.htmlspecialchars(error.response),\r\n\t\t\t};\r\n\t\t} else if (error instanceof HttpError) {\r\n\t\t\tvariables = {\r\n\t\t\t\t'TITLE': this.getLang('HTTP_ERROR'),\r\n\t\t\t\t'MESSAGE': error.message,\r\n\t\t\t\t'DEBUG': BX.util.htmlspecialchars(error.response),\r\n\t\t\t};\r\n\t\t} else if (error instanceof Error) {\r\n\t\t\tvariables = {\r\n\t\t\t\t'TITLE': this.getLang('JS_ERROR'),\r\n\t\t\t\t'MESSAGE': error.message,\r\n\t\t\t\t'DEBUG': BX.util.htmlspecialchars(error.trace),\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tvariables = {\r\n\t\t\t\t'TITLE': 'Unknown error',\r\n\t\t\t\t'MESSAGE': error,\r\n\t\t\t\t'DEBUG': '',\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tthis.stopTimer();\r\n\t\tthis.toggleButtons(false);\r\n\t\tthis.clearFormData();\r\n\t\tthis.clearState();\r\n\t\tthis.showMessage(compileTemplate(template, variables));\r\n\t}\r\n\r\n\tparseResponse(response: string|Object) : Object {\r\n\t\ttry {\r\n\t\t\tconst data = typeof response === 'string' ? JSON.parse(response) : response;\r\n\r\n\t\t\tif (!$.isPlainObject(data)) {\r\n\t\t\t\tthrow new Error('not valid response');\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t} catch (error) {\r\n\t\t\tthrow new ParseError(\r\n\t\t\t\terror,\r\n\t\t\t\ttypeof response !== 'string' ? JSON.stringify(response) : response\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleButtons(dir: boolean) : void {\r\n\t\tconst run = this.getElement('run');\r\n\t\tconst stop = this.getElement('stop');\r\n\r\n\t\trun.prop('disabled', dir);\r\n\t\tstop.prop('disabled', !dir);\r\n\t}\r\n}"],"names":["compileTemplate","template","replaces","result","key","hasOwnProperty","replaceKey","replaceValue","replace","indexOf","$","window","AvitoJQuery","Skeleton","constructor","element","options","$el","el","this","Object","assign","defaults","data","destroy","getElement","context","method","selector","getElementSelector","getNode","optionKey","getTemplate","option","optionFirstSymbol","substring","html","document","getLang","langKey","lang","langPrefix","BX","message","HttpError","Error","response","ParseError","error","previousError","Runner","onRunClick","event","toggleButtons","showMessage","startTimer","query","preventDefault","onStopClick","onCopyClick","link","currentTarget","previousElementSibling","value","navigator","clipboard","writeText","then","showMessageCopyLink","catch","err","console","log","tickTimer","startDate","_timerStart","timerElement","diff","Date","seconds","parseInt","minutes","Math","floor","length","text","_timerInterval","setTimeout","queryEnd","parseResponse","_query","status","queryDelayed","getFormValue","setState","state","bindCopy","clearFormData","clearState","stopTimer","queryStop","xhr","textStatus","errorThrown","statusText","responseText","queryError","variables","util","htmlspecialchars","trace","bind","initVars","_formData","_queryTimeout","_state","handleRunClick","handleStopClick","handleCopyClick","unbind","dir","alert","action","queryDelayedCancel","queryAbort","makeQuery","Promise","resolve","reject","getFormData","serializeArray","slice","getState","field","formData","i","name","config","url","attr","type","push","stateKey","ajax","show","clearTimeout","abort","delay","proxy","JSON","parse","isPlainObject","stringify","run","stop","prop","runElement","stopElement","copyElement","linkFileElement","messageElement","timerHolderElement","errorTemplate","COPY_TO_BUFFER","JS_ERROR","HTTP_ERROR","PARSE_ERROR"],"mappings":"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"}