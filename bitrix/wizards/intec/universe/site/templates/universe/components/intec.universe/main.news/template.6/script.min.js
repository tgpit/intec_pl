!function(){"use strict";if(window.MainNewsNavigation)return!1;var t=template.getLibrary("_");window.MainNewsNavigation=function(){this.active=!1,this.component={path:null,template:null,parameters:{}},this.navigation={id:null,current:1,count:1},this.container={root:null,items:null,navigationContainer:null,navigationButton:null},this.settings={buttonDelete:!1}},MainNewsNavigation.prototype={init:function(t){return this.setParameters(t),!!this.checkParameters()&&(!!this.setContainers()&&(this.configure(),void this.bindAction()))},setParameters:function(i){return!t.isNil(i)&&(!t.isNil(i.component)&&(!t.isNil(i.navigation)&&(!t.isNil(i.container)&&(t.isNil(i.component.path)||(this.component.path=i.component.path),t.isNil(i.component.template)||(this.component.template=i.component.template),t.isNil(i.component.parameters)||(this.component.parameters=i.component.parameters),t.isNil(i.navigation.id)||(this.navigation.id=i.navigation.id),t.isNil(i.navigation.current)||(this.navigation.current=i.navigation.current),t.isNil(i.navigation.count)||(this.navigation.count=i.navigation.count),t.isNil(i.container.root)||(this.container.root=i.container.root),t.isNil(i.container.items)||(this.container.items=i.container.items),t.isNil(i.container.navigationContainer)||(this.container.navigationContainer=i.container.navigationContainer),t.isNil(i.container.navigationButton)||(this.container.navigationButton=i.container.navigationButton),void(!t.isEmpty(i.settings)&&t.isObject(i.settings)&&this.setSettings(i.settings))))))},checkParameters:function(){for(var i in this.component)if(t.isNil(this.component[i]))return!1;for(var i in this.container)if(t.isNil(this.container[i]))return!1;if(!t.isNil(this.navigation.id))return this.navigation.current<this.navigation.count},setContainers:function(){return this.container.root=document.querySelector(this.container.root),null!==this.container.root&&(this.container.items=this.container.root.querySelector(this.container.items),null!==this.container.items&&(this.container.navigationContainer=this.container.root.querySelector(this.container.navigationContainer),null!==this.container.navigationContainer&&(this.container.navigationButton=this.container.navigationContainer.querySelector(this.container.navigationButton)),null!==this.container.navigationButton))},getSettings:function(i){var n=void 0;return!t.isNil(i)&&t.isString(i)?this.settings.hasOwnProperty(i)&&(n=this.settings[i]):n=this.settings,t.cloneDeep(n)},setSettings:function(i){if(!t.isEmpty(i)&&t.isObject(i)){var n=this;t.each(i,function(t,i){n.settings.hasOwnProperty(i)&&(n.settings[i]=t)})}},isActive:function(){return this.active=this.navigation.current<this.navigation.count,this.active},buttonSetState:function(t){this.container.navigationButton.setAttribute("data-state",t)},buttonIsActive:function(){return"active"===this.container.navigationButton.getAttribute("data-state")},itemsSetState:function(t){this.container.items.setAttribute("data-state",t)},configure:function(){this.isActive()?this.buttonSetState("active"):!0===this.getSettings("buttonDelete")?this.container.navigationContainer.remove():this.buttonSetState("disabled"),this.itemsSetState("none")},bindAction:function(){this.container.navigationButton.addEventListener("click",BX.delegate(function(){this.actionClick()},this))},setUrl:function(){var t;return t=this.navigation.current+1,this.component.path+"?"+this.navigation.id+"=page-"+t},actionClick:function(){if(!this.active||!this.buttonIsActive())return!1;this.buttonSetState("processing"),this.itemsSetState("processing"),BX.ajax({url:this.setUrl(),method:"POST",dataType:"json",timeout:60,cache:!0,data:{action:"navigation",template:this.component.template,parameters:this.component.parameters},onsuccess:BX.delegate(function(t){this.actionSuccess(t),this.configure()},this),onfailure:BX.delegate(function(){this.configure()},this)})},actionSuccess:function(t){null!==t.items&&(this.container.items.insertAdjacentHTML("beforeend",t.items),this.navigation.current++)}}}();