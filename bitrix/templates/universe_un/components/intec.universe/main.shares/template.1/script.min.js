!function(){"use strict";if(window.MainSharesNavigation)return!1;var t=template.getLibrary("_"),n=template.getLibrary("$");window.MainSharesNavigation=function(){this.active=!1,this.component={path:null,template:null,parameters:{}},this.navigation={id:null,current:1,count:1},this.container={root:null,items:null,navigationContainer:null,navigationButton:null},this.settings={buttonDelete:!1}},MainSharesNavigation.prototype={init:function(t){return this.setParameters(t),!!this.checkParameters()&&(!!this.setContainers()&&(this.configure(),void this.bindAction()))},setParameters:function(n){return!t.isEmpty(n)&&(!t.isEmpty(n.component)&&(!t.isEmpty(n.navigation)&&(!t.isEmpty(n.container)&&(t.isEmpty(n.component.path)||(this.component.path=n.component.path),t.isEmpty(n.component.template)||(this.component.template=n.component.template),t.isEmpty(n.component.parameters)||(this.component.parameters=n.component.parameters),t.isEmpty(n.navigation.id)||(this.navigation.id=n.navigation.id),t.isInteger(n.navigation.current)&&n.navigation.current>0?this.navigation.current=n.navigation.current:this.navigation.current=1,t.isInteger(n.navigation.count)&&n.navigation.count>1?this.navigation.count=n.navigation.count:this.navigation.count=1,t.isEmpty(n.container.root)||(this.container.root=n.container.root),t.isEmpty(n.container.items)||(this.container.items=n.container.items),t.isEmpty(n.container.navigationContainer)||(this.container.navigationContainer=n.container.navigationContainer),t.isEmpty(n.container.navigationButton)||(this.container.navigationButton=n.container.navigationButton),void(!t.isEmpty(n.settings)&&t.isObject(n.settings)&&this.setSettings(n.settings))))))},checkParameters:function(){for(var n in this.component)if(t.isEmpty(this.component[n]))return!1;for(var n in this.container)if(t.isEmpty(this.container[n]))return!1;return!t.isEmpty(this.navigation.id)&&this.navigation.current<this.navigation.count},setContainers:function(){return this.container.root=document.querySelector(this.container.root),null!==this.container.root&&(this.container.items=n(this.container.items,this.container.root),!(this.container.items.length<1)&&(this.container.navigationContainer=this.container.root.querySelector(this.container.navigationContainer),null!==this.container.navigationContainer&&(this.container.navigationButton=this.container.navigationContainer.querySelector(this.container.navigationButton)),null!==this.container.navigationButton))},getSettings:function(n){var i=void 0;return!t.isNil(n)&&t.isString(n)?this.settings.hasOwnProperty(n)&&(i=this.settings[n]):i=this.settings,t.cloneDeep(i)},setSettings:function(n){if(!t.isEmpty(n)&&t.isObject(n)){var i=this;t.each(n,function(t,n){i.settings.hasOwnProperty(n)&&(i.settings[n]=t)})}},isActive:function(){return this.active=this.navigation.current<this.navigation.count,this.active},buttonSetState:function(t){this.container.navigationButton.setAttribute("data-state",t)},buttonIsActive:function(){return"active"===this.container.navigationButton.getAttribute("data-state")},itemsSetState:function(t){this.container.items.attr("data-state",t)},configure:function(){this.isActive()?this.buttonSetState("active"):!0===this.getSettings("buttonDelete")?this.container.navigationContainer.remove():this.buttonSetState("disabled"),this.itemsSetState("none")},bindAction:function(){this.container.navigationButton.addEventListener("click",BX.delegate(function(){this.actionClick()},this))},setUrl:function(){var t;return t=this.navigation.current+1,this.component.path+"?"+this.navigation.id+"=page-"+t},actionClick:function(){if(!this.active||!this.buttonIsActive())return!1;this.buttonSetState("processing"),this.itemsSetState("processing"),BX.ajax({url:this.setUrl(),method:"POST",dataType:"json",timeout:60,cache:!0,data:{action:"navigation",template:this.component.template,parameters:this.component.parameters},onsuccess:BX.delegate(function(t){this.actionSuccess(t),this.configure()},this),onfailure:BX.delegate(function(){this.configure()},this)})},actionSuccess:function(t){null!==t.items&&(this.container.items.append(t.items),this.navigation.current++)}}}();