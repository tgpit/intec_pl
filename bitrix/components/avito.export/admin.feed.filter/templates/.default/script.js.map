{"version":3,"file":"script.js","sources":["../../../../js/plugin/utils.js","../../../../js/plugin/skeleton.js","src/transport.js","src/value/skeleton.js","src/value/select.js","src/value/datetime.js","src/value/text.js","src/value/autocomplete.js","src/row.js","src/value/factory.js","src/junction.js","src/junctioncollection.js","src/filter.js","src/filtercollection.js"],"sourcesContent":["// @flow\r\n\r\nexport function compileTemplate(template: string, replaces: Object) {\r\n\tlet result = template;\r\n\r\n\tfor (const key in replaces) {\r\n\t\tif (!replaces.hasOwnProperty(key)) { continue; }\r\n\r\n\t\tconst replaceKey = '#' + key + '#';\r\n\t\tconst replaceValue = replaces[key];\r\n\r\n\t\tdo {\r\n\t\t\tresult = result.replace(replaceKey, replaceValue);\r\n\t\t} while (result.indexOf(replaceKey) !== -1);\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\nexport function htmlToElement(html, tag = 'div') {\r\n\tconst renderer = document.createElement(tag);\r\n\r\n\trenderer.innerHTML = html;\r\n\r\n\treturn renderer.firstElementChild;\r\n}","import {compileTemplate} from \"./utils\";\r\n\r\n// noinspection JSUnresolvedVariable\r\nconst $ = window.AvitoJQuery ?? window.$;\r\n\r\nexport class Skeleton {\r\n\r\n\tstatic defaults = {\r\n\t\tlang: {},\r\n\t\tlangPrefix: null\r\n\t};\r\n\r\n\tconstructor(element: HTMLElement, options: Object = {}) {\r\n\t\tthis.$el = $(element);\r\n\t\tthis.el = this.$el[0];\r\n\t\tthis.options = Object.assign({}, this.constructor.defaults, this.$el.data(), options);\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.el = null;\r\n\t}\r\n\t\r\n\tgetElement(key, context, method) : JQuery {\r\n\t\tconst selector = this.getElementSelector(key);\r\n\t\r\n\t\treturn this.getNode(selector, context, method || 'find');\r\n\t}\r\n\t\r\n\tgetElementSelector(key: string) : string {\r\n\t\tconst optionKey = key + 'Element';\r\n\t\r\n\t\treturn this.options[optionKey];\r\n\t}\r\n\t\r\n\tgetTemplate(key: string) : string {\r\n\t\tconst optionKey = key + 'Template';\r\n\t\tconst option = this.options[optionKey];\r\n\t\tconst optionFirstSymbol = option.substring(0, 1);\r\n\t\tlet result;\r\n\t\r\n\t\tif (optionFirstSymbol === '.' || optionFirstSymbol === '#') {\r\n\t\t\tresult = this.getNode(option).html();\r\n\t\t} else {\r\n\t\t\tresult = option;\r\n\t\t}\r\n\t\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\tgetNode(selector, context, method = 'find') : JQuery {\r\n\t\tif (selector.substring(0, 1) === '#') { // is id query\r\n\t\t\tcontext = $(document);\r\n\t\t} else if (!context) {\r\n\t\t\tcontext = this.$el;\r\n\t\t}\r\n\t\r\n\t\treturn context[method](selector);\r\n\t}\r\n\t\r\n\tgetLang(key, replaces) : string {\r\n\t\tlet langKey;\r\n\t\tlet result;\r\n\t\r\n\t\tif (this.options.lang != null && key in this.options.lang) {\r\n\t\t\tresult = this.options.lang[key];\r\n\t\t} else {\r\n\t\t\tlangKey = this.options.langPrefix + key;\r\n\t\t\tresult = BX.message(langKey) || '';\r\n\t\t}\r\n\t\r\n\t\tif (result && replaces) {\r\n\t\t\tresult = compileTemplate(result, replaces);\r\n\t\t}\r\n\t\r\n\t\treturn result;\r\n\t}\r\n}\r\n","export class Transport {\r\n\r\n\tconstructor(component: string, signedParameters: string) {\r\n\t\tthis.component = component;\r\n\t\tthis.signedParameters = signedParameters;\r\n\t}\r\n\r\n\tfetch(action: string, data: Object = {}) : Promise {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t// noinspection JSUnresolvedFunction\r\n\t\t\tBX.ajax.runComponentAction(this.component, action, {\r\n\t\t\t\tmode: 'ajax',\r\n\t\t\t\tsignedParameters: this.signedParameters,\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tconst data = response.data;\r\n\r\n\t\t\t\t\tif (data.status === 'ok') {\r\n\t\t\t\t\t\tresolve(data.data);\r\n\t\t\t\t\t} else if (data.status === 'error') {\r\n\t\t\t\t\t\treject(new Error(data.message));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(new Error('unknown response format'));\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((response) => { reject(this.queryError(response)); });\r\n\t\t});\r\n\t}\r\n\r\n\t// noinspection DuplicatedCode\r\n\tqueryError(response: Object) : Error {\r\n\t\tif (response.status !== 'error') {\r\n\t\t\treturn new Error('unknown response');\r\n\t\t}\r\n\r\n\t\tif (!Array.isArray(response.errors) || response.errors.length === 0) {\r\n\t\t\treturn new Error('error response does not contain errors');\r\n\t\t}\r\n\r\n\t\tconst error = response.errors[response.errors.length - 1];\r\n\r\n\t\treturn new Error(error.message);\r\n\t}\r\n\r\n}","import {Transport} from \"../transport\";\r\n\r\n// noinspection JSUnresolvedVariable\r\nconst $ = window.AvitoJQuery ?? window.$;\r\n\r\nexport class ValueSkeleton {\r\n\r\n\tconstructor(element: HTMLElement) {\r\n\t\tthis.$el = $(element);\r\n\t\tthis._field = null;\r\n\t\tthis._multiple = false;\r\n\t}\r\n\r\n\tboot() : void {\r\n\t\t// nothing by default\r\n\t}\r\n\r\n\tdestroy() : void {\r\n\t\t// nothing by default\r\n\t}\r\n\r\n\ttype() : string {\r\n\t\tthrow new Error('not implemented');\r\n\t}\r\n\r\n\ttransport(transport: Transport) : void {\r\n\t\tthis._transport = transport;\r\n\t}\r\n\r\n\tfield(field: Object, multiple: boolean) : void {\r\n\t\tthis._field = field;\r\n\t\tthis._multiple = multiple;\r\n\t}\r\n\r\n\trender() : void {\r\n\t\tconst element = $(this.template());\r\n\t\tconst newInput = this.findInput(element);\r\n\t\tconst oldInput = this.findInput(this.$el);\r\n\t\tconst anchor = this.findAnchor(this.$el);\r\n\r\n\t\tnewInput.attr('name', oldInput.attr('name'));\r\n\r\n\t\tthis.copyName(oldInput, newInput);\r\n\r\n\t\tanchor.replaceWith(element);\r\n\t\tthis.$el = newInput;\r\n\t}\r\n\r\n\tfindInput(element: JQuery) : JQuery {\r\n\t\tconst selector = '[data-entity=\"value\"]';\r\n\r\n\t\treturn element.is(selector) ? element : element.find(selector).eq(0);\r\n\t}\r\n\r\n\tcopyName(from: JQuery, to: JQuery) : void {\r\n\t\tconst fromName = from.attr('name').replace(/\\[]$/, '');\r\n\r\n\t\tto.attr('name', fromName + (this._multiple ? '[]' : ''));\r\n\t}\r\n\r\n\tfindAnchor(element: JQuery) : JQuery {\r\n\t\tconst anchor = element.closest('[data-entity=\"valueAnchor\"]');\r\n\r\n\t\treturn anchor.length > 0 ? anchor : element;\r\n\t}\r\n\r\n\treflow() : void {\r\n\t\t// nothing by default\r\n\t}\r\n\r\n\ttemplate() : string {\r\n\t\treturn '';\r\n\t}\r\n\r\n}\r\n\r\n","import {ValueSkeleton} from \"./skeleton\";\r\n\r\nexport class ValueSelect extends ValueSkeleton {\r\n\r\n\ttype() : string {\r\n\t\treturn 'select';\r\n\t}\r\n\r\n\tboot() {\r\n\t\tthis.stampVariants(this.templateOptions());\r\n\t\tthis.$el.select2(this.selectOptions());\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.$el.select2('destroy');\r\n\t}\r\n\r\n\treflow() : void {\r\n\t\tconst needBoot = (this.$el.prop('multiple') !== this._multiple);\r\n\t\tconst options = this.templateOptions();\r\n\r\n\t\tif (needBoot) {\r\n\t\t\tthis.$el.select2('destroy');\r\n\t\t\tthis.$el.prop('multiple', this._multiple);\r\n\t\t}\r\n\r\n\t\tif (this.changedVariants(options)) {\r\n\t\t\tthis.stampVariants(options);\r\n\t\t\tthis.$el.html(options);\r\n\t\t}\r\n\r\n\t\tif (needBoot) {\r\n\t\t\tthis.$el.select2(this.selectOptions());\r\n\t\t}\r\n\t}\r\n\r\n\tselectOptions() : Object {\r\n\t\treturn {\r\n\t\t\ttokenSeparators: [',']\r\n\t\t};\r\n\t}\r\n\r\n\ttemplate() : string {\r\n\t\tconst options = this.templateOptions();\r\n\r\n\t\tthis.stampVariants(options);\r\n\r\n\t\t// noinspection HtmlUnknownAttribute\r\n\t\treturn `<select class=\"adm-input-wrap adm-input-wrap-calendar\" ${this._multiple ? 'multiple' : ''} data-entity=\"value\">\r\n\t\t\t${options}\r\n\t\t</select>`;\r\n\t}\r\n\r\n\ttemplateOptions() : string {\r\n\t\treturn this._field['VARIANTS'].map((option) => `<option value=\"${option['ID']}\">${option['VALUE']}</option>`).join('');\r\n\t}\r\n\r\n\tchangedVariants(options: string) : boolean {\r\n\t\treturn this._renderedOptions !== options;\r\n\t}\r\n\r\n\tstampVariants(options: string) : void {\r\n\t\tthis._renderedOptions = options;\r\n\t}\r\n}","import {ValueSkeleton} from \"./skeleton\";\r\n\r\nexport class ValueDateTime extends ValueSkeleton {\r\n\r\n\ttype() : string {\r\n\t\treturn 'datetime';\r\n\t}\r\n\r\n\tboot() : void {\r\n\t\tthis.handleCalendarClick(true);\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.handleCalendarClick(false);\r\n\t}\r\n\r\n\thandleCalendarClick(dir: boolean) : void {\r\n\t\tconst icon = this.$el.next('.adm-calendar-icon');\r\n\r\n\t\ticon[dir ? 'on' : 'off']('click', this.onCalendarClick);\r\n\t}\r\n\r\n\tonCalendarClick = (evt) : void => {\r\n\t\tBX.calendar({\r\n\t\t\tnode: evt.currentTarget,\r\n\t\t\tfield: this.$el[0],\r\n\t\t\tform: '',\r\n\t\t\tbTime: true,\r\n\t\t\tbHideTime: true,\r\n\t\t});\r\n\t}\r\n\r\n\ttemplate() : string {\r\n\t\treturn `<div class=\"adm-input-wrap adm-input-wrap-calendar\" data-entity=\"valueAnchor\">\r\n\t\t\t<input class=\"adm-input adm-input-calendar\" type=\"text\" data-entity=\"value\" />\r\n\t\t\t<span class=\"adm-calendar-icon\"></span>\r\n\t\t</div>`;\r\n\t}\r\n}","import {ValueSkeleton} from \"./skeleton\";\r\n\r\nexport class ValueText extends ValueSkeleton {\r\n\r\n\ttype() : string {\r\n\t\treturn 'text';\r\n\t}\r\n\r\n\tboot() {\r\n\t\tif (!this._multiple) { return; }\r\n\r\n\t\tthis.$el.select2(this.selectOptions());\r\n\t}\r\n\r\n\tselectOptions() : Object {\r\n\t\treturn {\r\n\t\t\ttags: true,\r\n\t\t\ttokenSeparators: [',']\r\n\t\t};\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tif (!this._multiple) { return; }\r\n\r\n\t\tthis.$el.select2('destroy');\r\n\t}\r\n\r\n\treflow() : void {\r\n\t\tconst nowMultiple = this.$el.is('select');\r\n\r\n\t\tif (nowMultiple === this._multiple) { return; }\r\n\r\n\t\tif (nowMultiple) {\r\n\t\t\tthis.$el.select2('destroy');\r\n\t\t}\r\n\r\n\t\tthis.render();\r\n\t\tthis.boot();\r\n\t}\r\n\r\n\ttemplate() : string {\r\n\t\treturn this._multiple ? `<select multiple data-entity=\"value\"></select>` : `<input type=\"text\" data-entity=\"value\" />`;\r\n\t}\r\n\r\n}","import {ValueSkeleton} from \"./skeleton\";\r\n\r\nexport class ValueAutocomplete extends ValueSkeleton {\r\n\r\n\ttype() : string {\r\n\t\treturn 'autocomplete';\r\n\t}\r\n\r\n\tboot() : void {\r\n\t\tthis.$el.select2(this.selectOptions());\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.$el.select2('destroy');\r\n\t}\r\n\r\n\treflow() : void {\r\n\t\tif (this.$el.prop('multiple') === this._multiple) { return; }\r\n\r\n\t\tthis.$el.select2('destroy');\r\n\t\tthis.$el.prop('multiple', this._multiple);\r\n\t\tthis.$el.select2(this.selectOptions());\r\n\t}\r\n\r\n\ttemplate() : string {\r\n\t\t// noinspection HtmlUnknownAttribute\r\n\t\treturn `<select class=\"adm-input-wrap adm-input-wrap-calendar\" ${this._multiple ? 'multiple' : ''} data-entity=\"value\"></select>`;\r\n\t}\r\n\r\n\tselectOptions() : Object {\r\n\t\treturn {\r\n\t\t\tminimumInputLength: 1,\r\n\t\t\tajax: {\r\n\t\t\t\ttransport: this.ajaxTransport(),\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tajaxTransport() {\r\n\t\treturn (params, success, failure) => {\r\n\t\t\tthis._transport.fetch('suggest', {\r\n\t\t\t\tquery: params.data.term,\r\n\t\t\t\tfield: this._field['ID'],\r\n\t\t\t})\r\n\t\t\t\t.then((options: Array) => this.convertOptions(options))\r\n\t\t\t\t.then(success)\r\n\t\t\t\t.catch((error) => { failure(error.message) });\r\n\t\t};\r\n\t}\r\n\r\n\tconvertOptions(options: Array) : Object {\r\n\t\tconst items = [];\r\n\r\n\t\tfor (const option of options) {\r\n\t\t\titems.push({\r\n\t\t\t\tid: option['ID'],\r\n\t\t\t\ttext: option['VALUE'],\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tresults: items,\r\n\t\t};\r\n\t}\r\n}","// @flow\r\n\r\nimport {Skeleton} from \"../../../../../js/plugin/skeleton\";\r\nimport {ValueFactory} from \"./value/factory\";\r\nimport {ValueSkeleton} from \"./value/skeleton\";\r\n\r\n// noinspection JSUnresolvedVariable\r\nconst $ = window.AvitoJQuery ?? window.$;\r\n\r\nexport class Row extends Skeleton {\r\n\r\n\tstatic defaults = {\r\n\t\tfieldElement: '[data-entity=\"field\"]',\r\n\t\tcompareElement: '[data-entity=\"compare\"]',\r\n\t\tvalueElement: '[data-entity=\"value\"]',\r\n\t\tdeleteElement: '[data-entity=\"delete\"]',\r\n\t\tglueElement: '[data-entity=\"glue\"]',\r\n\r\n\t\ttransport: null,\r\n\t\tfields: [],\r\n\r\n\t\tonDelete: () => {},\r\n\r\n\t\tlang: {},\r\n\t}\r\n\r\n\tconstructor(element: HTMLElement, options: Object = {}) {\r\n\t\tsuper(element, options);\r\n\t\tthis._stored = {};\r\n\r\n\t\tthis.touchValue('field');\r\n\t\tthis.touchValue('compare');\r\n\t\tthis.bind();\r\n\t}\r\n\r\n\tclone() : Row {\r\n\t\tconst element = this.$el.clone(false, false);\r\n\t\tconst result = new Row(element, this.options);\r\n\r\n\t\tresult.clearClone();\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tdestroy() : void {\r\n\t\tthis.unbind();\r\n\t\tthis.destroyField();\r\n\t\tsuper.destroy();\r\n\t}\r\n\r\n\tbind() : void {\r\n\t\tthis.handleDeleteClick(true);\r\n\t\tthis.handleFieldChange(true);\r\n\t\tthis.handleCompareChange(true);\r\n\t}\r\n\r\n\tunbind() : void {\r\n\t\tthis.handleDeleteClick(false);\r\n\t\tthis.handleFieldChange(false);\r\n\t\tthis.handleCompareChange(false);\r\n\t}\r\n\r\n\thandleDeleteClick(dir: boolean) : void {\r\n\t\tconst element = this.getElement('delete');\r\n\r\n\t\telement[dir ? 'on' : 'off']('click', this.onDeleteClick);\r\n\t}\r\n\r\n\thandleFieldChange(dir: boolean) : void {\r\n\t\tconst element = this.getElement('field');\r\n\r\n\t\telement[dir ? 'on' : 'off']('change keyup', this.onFieldChange);\r\n\t}\r\n\r\n\thandleCompareChange(dir: boolean) : void {\r\n\t\tconst element = this.getElement('compare');\r\n\r\n\t\telement[dir ? 'on' : 'off']('change keyup', this.onCompareChange);\r\n\t}\r\n\r\n\tonDeleteClick = () : void => {\r\n\t\tthis.options.onDelete(this);\r\n\t}\r\n\r\n\tonFieldChange = () : void => {\r\n\t\tif (!this.touchValue('field')) { return; }\r\n\r\n\t\tthis.reflowCompare();\r\n\t\tthis.reflowValue();\r\n\t}\r\n\r\n\tonCompareChange = () : void => {\r\n\t\tif (!this.touchValue('compare')) { return; }\r\n\r\n\t\tthis.reflowValue();\r\n\t}\r\n\r\n\ttouchValue(field: string) : boolean {\r\n\t\tconst element = this.getElement(field);\r\n\t\tconst value = element.val();\r\n\r\n\t\tif (this._stored[field] === value) { return false; }\r\n\r\n\t\tthis._stored[field] = value;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\treflowCompare() : void {\r\n\t\tconst filter = this.selectedField();\r\n\t\tconst compare = this.getElement('compare');\r\n\t\tconst options = compare.find('option');\r\n\t\tlet firstAvailable;\r\n\t\tlet changed = false;\r\n\r\n\t\toptions.each((index, option: HTMLOptionElement) => {\r\n\t\t\tconst disabled = filter['CONDITIONS'].indexOf(option.value) === -1;\r\n\r\n\t\t\tif (disabled) {\r\n\t\t\t\tif (option.selected) { changed = true; }\r\n\r\n\t\t\t\toption.disabled = true;\r\n\t\t\t\toption.selected = false;\r\n\t\t\t} else {\r\n\t\t\t\tif (firstAvailable == null) { firstAvailable = option; }\r\n\r\n\t\t\t\toption.disabled = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (changed && firstAvailable != null) {\r\n\t\t\tfirstAvailable.selected = true;\r\n\t\t}\r\n\t}\r\n\r\n\tbootValue() : void {\r\n\t\tif (this._valueUi != null) { return; }\r\n\r\n\t\tconst filter = this.selectedField();\r\n\t\tconst multiple = this.isValueMultiple();\r\n\r\n\t\tthis._valueUi = this.createValueUi(filter, multiple);\r\n\t\tthis._valueUi.boot();\r\n\t}\r\n\r\n\treflowValue() : void {\r\n\t\tconst filter = this.selectedField();\r\n\t\tconst multiple = this.isValueMultiple();\r\n\r\n\t\tif (this._valueUi != null && filter['TEMPLATE'] === this._valueUi.type()) {\r\n\t\t\tthis._valueUi.field(filter, multiple);\r\n\t\t\tthis._valueUi.reflow();\r\n\t\t} else {\r\n\t\t\tif (this._valueUi != null) {\r\n\t\t\t\tthis._valueUi.destroy();\r\n\t\t\t}\r\n\r\n\t\t\tthis._valueUi = this.createValueUi(filter, multiple);\r\n\t\t\tthis._valueUi.render();\r\n\t\t\tthis._valueUi.boot();\r\n\t\t}\r\n\t}\r\n\r\n\tcreateValueUi(filter: Object, multiple: boolean) : ValueSkeleton {\r\n\t\tconst element = this.getElement('value');\r\n\t\tconst valueUi = ValueFactory.make(element, filter['TEMPLATE']);\r\n\r\n\t\tvalueUi.transport(this.options.transport);\r\n\t\tvalueUi.field(filter, multiple);\r\n\r\n\t\treturn valueUi;\r\n\t}\r\n\r\n\tselectedField() : Object {\r\n\t\tconst field = this.getElement('field');\r\n\r\n\t\treturn this.findFilter(field.val());\r\n\t}\r\n\r\n\tisValueMultiple() : boolean {\r\n\t\tconst options = this.getElement('compare').find('option');\r\n\t\tlet selected = options.filter(':selected')\r\n\r\n\t\tif (selected.length === 0) {\r\n\t\t\tselected = options.filter(':disabled').eq(0);\r\n\t\t}\r\n\r\n\t\treturn selected.data('multiple') != null;\r\n\t}\r\n\r\n\tfindFilter(id: string) : Object {\r\n\t\tlet result;\r\n\r\n\t\tfor (const filter of this.options.fields) {\r\n\t\t\tif (filter['ID'] === id) {\r\n\t\t\t\tresult = filter;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (result == null) {\r\n\t\t\tthrow new Error('cant find filter for ' + id);\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\treset() : void {\r\n\t\tthis.resetField();\r\n\t\tthis.touchValue('field');\r\n\t\tthis.reflowCompare();\r\n\t\tthis.resetCompare();\r\n\t\tthis.touchValue('compare');\r\n\t\tthis.reflowValue();\r\n\t}\r\n\r\n\tresetField() : void {\r\n\t\tthis.getElement('field').find('option').each((index, option) => { option.selected = false });\r\n\t}\r\n\r\n\tresetCompare() : void {\r\n\t\tthis.getElement('compare').find('option').each((index, option) => { option.selected = false });\r\n\t}\r\n\r\n\tfocus() : void {\r\n\t\tthis.getElement('field').focus();\r\n\t}\r\n\r\n\tallowDelete(dir: boolean) : void {\r\n\t\tconst element = this.getElement('delete');\r\n\r\n\t\telement.prop('disabled', !dir);\r\n\t\telement.toggleClass('avito--hidden', !dir);\r\n\t}\r\n\r\n\tupdateControlName(baseName: string) : void {\r\n\t\tfor (const control of this.controls()) {\r\n\t\t\tconst currentName = control.attr('name');\r\n\t\t\tconst nameLastMatches = currentName != null ? /\\[\\w+](\\[])?$/.exec(currentName) : null;\r\n\r\n\t\t\tif (nameLastMatches == null) { continue; }\r\n\r\n\t\t\tconst newName = baseName + nameLastMatches[0];\r\n\r\n\t\t\tcontrol.attr('name', newName);\r\n\t\t}\r\n\t}\r\n\r\n\tcontrols() : Array {\r\n\t\treturn [\r\n\t\t\tthis.getElement('glue'),\r\n\t\t\tthis.getElement('field'),\r\n\t\t\tthis.getElement('compare'),\r\n\t\t\tthis.getElement('value'),\r\n\t\t];\r\n\t}\r\n\r\n\tboot() : void {\r\n\t\tthis.bootField();\r\n\t\tthis.bootValue();\r\n\t}\r\n\r\n\tbootField() : void {\r\n\t\tconst element = this.getElement('field');\r\n\r\n\t\tif (!element.is('select') || element.hasClass('select2-hidden-accessible')) { return; }\r\n\r\n\t\telement.select2();\r\n\r\n\t\t// patch focus for jquery3.6\r\n\r\n\t\telement.on('select2:open', () => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tconst search = $('.select2-container--open .select2-search__field').last().get(0);\r\n\t\t\t\tsearch?.focus();\r\n\t\t\t}, 100);\r\n\t\t});\r\n\t}\r\n\r\n\tdestroyField() : void {\r\n\t\tconst element = this.getElement('field');\r\n\r\n\t\tif (!element.is('select') || !element.hasClass('select2-hidden-accessible')) { return; }\r\n\r\n\t\telement.select2('destroy');\r\n\t\telement.off('select2:open');\r\n\t}\r\n\r\n\tclearClone() : void {\r\n\t\tconst controls = [\r\n\t\t\tthis.getElement('field'),\r\n\t\t\tthis.getElement('value'),\r\n\t\t];\r\n\r\n\t\tfor (const element of controls) {\r\n\t\t\tif (!element.is('select')) { continue; }\r\n\r\n\t\t\tconst elementNext = element.next();\r\n\r\n\t\t\tif (element.hasClass('select2-hidden-accessible')) {\r\n\t\t\t\telement\r\n\t\t\t\t\t.removeClass('select2-hidden-accessible')\r\n\t\t\t\t\t.removeAttr('data-select2-id')\r\n\t\t\t\t\t.removeAttr('aria-hidden')\r\n\t\t\t\t\t.removeAttr('tabindex');\r\n\r\n\t\t\t\telement.find('optgroup')\r\n\t\t\t\t\t.removeAttr('data-select2-id');\r\n\r\n\t\t\t\telement.find('option')\r\n\t\t\t\t\t.removeAttr('data-select2-id');\r\n\t\t\t}\r\n\r\n\t\t\tif (elementNext.hasClass('select2')) {\r\n\t\t\t\telementNext.remove();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetLevel(level: number) : void {\r\n\t\tconst previousLevel = level === 1 ? 0 : 1;\r\n\r\n\t\tthis.$el.removeClass('level--' + previousLevel);\r\n\t\tthis.$el.addClass('level--' + level);\r\n\t}\r\n\r\n\tsetGlue(glue: string) : void {\r\n\t\tconst input = this.getElement('glue');\r\n\r\n\t\tinput.val(glue);\r\n\t}\r\n}","import {ValueSelect} from \"./select\";\r\nimport {ValueDateTime} from \"./datetime\";\r\nimport {ValueText} from \"./text\";\r\nimport {ValueAutocomplete} from \"./autocomplete\";\r\n\r\nexport class ValueFactory {\r\n\tstatic make(element: HTMLElement, type: string) {\r\n\t\tif (type === 'autocomplete') {\r\n\t\t\treturn new ValueAutocomplete(element);\r\n\t\t}\r\n\r\n\t\tif (type === 'select') {\r\n\t\t\treturn new ValueSelect(element);\r\n\t\t}\r\n\r\n\t\tif (type === 'datetime') {\r\n\t\t\treturn new ValueDateTime(element);\r\n\t\t}\r\n\r\n\t\treturn new ValueText(element);\r\n\t}\r\n}","// @flow\r\n\r\nimport {Skeleton} from \"../../../../../js/plugin/skeleton\";\r\nimport {JunctionCollection} from \"./junctioncollection\";\r\nimport {Row} from \"./row\";\r\n\r\nexport class Junction extends Skeleton {\r\n\r\n\tstatic GLUE_AND = 'AND';\r\n\tstatic GLUE_OR = 'OR';\r\n\r\n\tstatic defaults = {};\r\n\r\n\tcollection: JunctionCollection;\r\n\tpreviousRow: Row;\r\n\tnextRow: Row;\r\n\r\n\tconstructor(...args) {\r\n\t\tsuper(...args);\r\n\t\tthis.bind();\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.unbind();\r\n\t}\r\n\r\n\tsetCollection(collection: JunctionCollection) : void {\r\n\t\tthis.collection = collection;\r\n\t}\r\n\r\n\tsetPrevious(row: Row) : void {\r\n\t\tthis.previousRow = row;\r\n\t}\r\n\r\n\tsetNext(row: Row) : void {\r\n\t\tthis.nextRow = row;\r\n\t}\r\n\r\n\tbind() : void {\r\n\t\tthis.handleClick(true);\r\n\t}\r\n\r\n\tunbind() : void {\r\n\t\tthis.handleClick(false);\r\n\t}\r\n\r\n\thandleClick(dir: boolean) : void {\r\n\t\tthis.$el[dir ? 'on' : 'off']('click', this.onClick);\r\n\t}\r\n\r\n\tonClick = () : void => {\r\n\t\tthis.toggle();\r\n\t}\r\n\r\n\tisActive() {\r\n\t\treturn this.$el.hasClass('is--active');\r\n\t}\r\n\r\n\ttoggle() : void {\r\n\t\tif (!this.isActive()) {\r\n\t\t\tthis.activate();\r\n\t\t} else {\r\n\t\t\tthis.deactivate();\r\n\t\t}\r\n\t}\r\n\r\n\tactivate() : void {\r\n\t\tif (this.isActive()) { return; }\r\n\r\n\t\tthis.previousRow.setLevel(1);\r\n\t\tthis.nextRow.setLevel(1);\r\n\t\tthis.nextRow.setGlue(Junction.GLUE_OR);\r\n\t\tthis.renderState(1);\r\n\t}\r\n\r\n\tdeactivate() : void {\r\n\t\tif (!this.isActive()) { return; }\r\n\r\n\t\tconst previousJunction = this.collection.previous(this);\r\n\t\tconst nextJunction = this.collection.next(this);\r\n\t\tconst previousActive = previousJunction?.isActive();\r\n\t\tconst nextActive = nextJunction?.isActive();\r\n\r\n\t\t!previousActive && this.previousRow.setLevel(0);\r\n\t\t!nextActive && this.nextRow.setLevel(0);\r\n\r\n\t\tthis.nextRow.setGlue(Junction.GLUE_AND);\r\n\t\tthis.renderState(0);\r\n\t}\r\n\r\n\trenderState(state: number) : void {\r\n\t\tconst isActive = !!state;\r\n\r\n\t\tthis.$el.text(isActive ? this.getLang('JUNCTION_OR') : this.getLang('JUNCTION_AND'));\r\n\t\tthis.$el.toggleClass('is--active', isActive);\r\n\t}\r\n}","// @flow\r\n\r\nimport {Junction} from \"./junction\";\r\n\r\nexport class JunctionCollection {\r\n\t\r\n\tconstructor() {\r\n\t\tthis._collection = [];\r\n\t}\r\n\t\r\n\tadd(junction: Junction) : void {\r\n\t\tthis._collection.push(junction);\r\n\t\tjunction.setCollection(this);\r\n\t}\r\n\t\r\n\tremove(junction: Junction) : void {\r\n\t\tconst index = this.index(junction);\r\n\t\t\r\n\t\tthis._collection.splice(index, 1);\r\n\t}\r\n\t\r\n\tprevious(junction: Junction) : ?Junction {\r\n\t\tconst index = this.index(junction);\r\n\t\tconst targetIndex = index - 1;\r\n\t\t\r\n\t\treturn this._collection[targetIndex] ?? null;\r\n\t}\r\n\t\r\n\tnext(junction: Junction) : ?Junction {\r\n\t\tconst index = this.index(junction);\r\n\t\tconst targetIndex = index + 1;\r\n\t\t\r\n\t\treturn this._collection[targetIndex] ?? null;\r\n\t}\r\n\r\n\tat(index: number) : ?Junction {\r\n\t\treturn this._collection[index] ?? null;\r\n\t}\r\n\t\r\n\tindex(junction: Junction) : number {\r\n\t\tconst index = this._collection.indexOf(junction);\r\n\r\n\t\tif (index === -1) {\r\n\t\t\tthrow new Error('cant find junction at collection');\r\n\t\t}\r\n\t\t\r\n\t\treturn index;\r\n\t}\r\n}","// @flow\r\nimport {Skeleton} from \"../../../../../js/plugin/skeleton\";\r\nimport {JunctionCollection} from \"./junctioncollection\";\r\nimport {Transport} from \"./transport\";\r\nimport {Row} from \"./row\";\r\nimport {Junction} from \"./junction\";\r\nimport {compileTemplate} from \"../../../../../js/plugin/utils\";\r\n\r\nexport class Filter extends Skeleton {\r\n\r\n    static defaults = {\r\n        component: null,\r\n        signedParameters: null,\r\n        baseName: null,\r\n        nextIndex: 0,\r\n        fields: [],\r\n        rowElement: '[data-entity=\"row\"]',\r\n        junctionElement: '[data-entity=\"junction\"]',\r\n        junctionTemplate: '<button class=\"avito-filter-junction\" type=\"button\" data-entity=\"junction\">#TEXT#</button>',\r\n        addButtonElement: '[data-entity=\"addButton\"]',\r\n        deleteFilterElement: '[data-entity=\"deleteFilter\"]'\r\n    }\r\n\r\n    /** @var Row[] */\r\n    _rows = [];\r\n    _junctionCollection: JunctionCollection;\r\n\r\n    constructor(element: HTMLElement, options: Object = {}) {\r\n        super(element, options);\r\n        this._transport = new Transport(this.options.component, this.options.signedParameters);\r\n\r\n        this.initRows();\r\n    }\r\n\r\n\tinitRows() : void {\r\n        const elements = this.getElement('row');\r\n        const junctions = this.getElement('junction');\r\n        const junctionCollection = new JunctionCollection();\r\n        const rows = [];\r\n        let previous = null;\r\n\r\n        elements.each((index, element) => {\r\n            const row = new Row(element, {\r\n                transport: this._transport,\r\n                onDelete: (row: Row) => this.delete(row),\r\n                fields: this.options.fields,\r\n                lang: this.options.lang,\r\n            });\r\n\r\n            if (previous !== null) {\r\n                const junction = new Junction(junctions.eq(index - 1), {\r\n                    lang: this.options.lang,\r\n                });\r\n\r\n                junction.setPrevious(previous);\r\n                junction.setNext(row);\r\n                junctionCollection.add(junction);\r\n            }\r\n\r\n            rows.push(row);\r\n            previous = row;\r\n        });\r\n\r\n        this._rows = rows;\r\n        this._junctionCollection = junctionCollection;\r\n        this._nextIndex = rows.length;\r\n    }\r\n\r\n\tboot() : void {\r\n\t\tthis.bootRows();\r\n\t\tthis.bootAddButton();\r\n\t\tthis.bootDeleteButton();\r\n\t}\r\n\r\n\tbootRows() : void {\r\n\t\tfor (const row of this._rows) {\r\n\t\t\trow.boot();\r\n\t\t}\r\n\t}\r\n\r\n    bootAddButton() : void {\r\n        const element = this.getElement('addButton');\r\n\r\n        element.on('click', () => this.add());\r\n    }\r\n\r\n    bootDeleteButton() : void {\r\n        const element = this.getElement('deleteFilter');\r\n\r\n        element.on('click', () => this.options.onDelete(this));\r\n    }\r\n\r\n    add() : void {\r\n        const lastRow = this._rows[this._rows.length - 1];\r\n\r\n        if (lastRow == null) {\r\n            throw new Error('at least one filter row must be exists');\r\n        }\r\n\r\n        const newRow = lastRow.clone();\r\n\r\n        this.insertRow(newRow, lastRow.$el);\r\n        this.insertJunction(lastRow, newRow);\r\n        this.reflowDelete();\r\n    }\r\n\r\n    insertRow(row: Row, anchor: $) : void {\r\n        row.$el.insertAfter(anchor);\r\n\t\trow.updateControlName(this.options.baseName + '[' + this._nextIndex + ']');\r\n        row.reset();\r\n        row.boot();\r\n\r\n        this._rows.push(row);\r\n        ++this._nextIndex;\r\n    }\r\n\r\n    insertJunction(previous: Row, next: Row) : void {\r\n        const template = this.getTemplate('junction');\r\n        const html = compileTemplate(template, {\r\n            'TEXT': this.getLang('JUNCTION_AND'),\r\n        });\r\n        const junction = new Junction(html, {\r\n            lang: this.options.lang,\r\n        });\r\n\r\n        junction.$el.insertAfter(previous.$el);\r\n        junction.setPrevious(previous);\r\n        junction.setNext(next);\r\n\r\n        this._junctionCollection.add(junction);\r\n\r\n        if (this._junctionCollection.previous(junction)?.isActive()) {\r\n            junction.activate();\r\n        }\r\n    }\r\n\r\n    delete(row: Row) : void {\r\n        if (this._rows.length > 1) {\r\n            this.removeJunction(row);\r\n            this.removeRow(row);\r\n            this.reflowDelete();\r\n        } else {\r\n            row.reset();\r\n        }\r\n    }\r\n\r\n    removeJunction(row: Row) : void {\r\n        const rowIndex = this._rows.indexOf(row);\r\n        let junction;\r\n\r\n        if (rowIndex === 0) {\r\n            junction = this._junctionCollection.at(0);\r\n\r\n            this.syncJunctionFirst(junction);\r\n        } else {\r\n            junction = this._junctionCollection.at(rowIndex - 1);\r\n\r\n            this.syncJunctionBefore(junction, this._rows[rowIndex - 1]);\r\n        }\r\n\r\n        junction.destroy();\r\n        junction.$el.remove();\r\n\r\n        this._junctionCollection.remove(junction);\r\n    }\r\n\r\n    syncJunctionBefore(junction: Junction, previousRow: Row) : void {\r\n        const next = this._junctionCollection.next(junction);\r\n\r\n        if (next == null) {\r\n            junction.deactivate();\r\n            return;\r\n        }\r\n\r\n        if (!junction.isActive() && next.isActive()) {\r\n            next.deactivate();\r\n        }\r\n\r\n        next.setPrevious(previousRow);\r\n    }\r\n\r\n    syncJunctionFirst(junction: Junction) : void {\r\n        junction.deactivate();\r\n    }\r\n\r\n    removeRow(row: Row) : void {\r\n        const rowElement = row.$el;\r\n        const rowIndex = this._rows.indexOf(row);\r\n\r\n        if (rowIndex === -1) { throw new Error('cant delete unknown row'); }\r\n\r\n        row.destroy();\r\n        rowElement.remove();\r\n\r\n        this._rows.splice(rowIndex, 1);\r\n    }\r\n\r\n    reflowDelete() : void {\r\n        const hasFew = this._rows.length > 1;\r\n\r\n        for (const row of this._rows) {\r\n            row.allowDelete(hasFew);\r\n        }\r\n    }\r\n\r\n    allowDelete(dir: boolean) : void {\r\n        const element = this.getElement('deleteFilter');\r\n\r\n        element.prop('disabled', !dir);\r\n        element.toggleClass('avito--hidden', !dir);\r\n    }\r\n\r\n\treset() : void {\r\n\t\tconst rowsCopy = this._rows.slice();\r\n\t\tlet index = 0;\r\n\r\n\t\tfor (const row of rowsCopy) {\r\n\t\t\tif (index === 0) {\r\n\t\t\t\trow.reset();\r\n\t\t\t} else {\r\n\t\t\t\tthis.delete(row);\r\n\t\t\t}\r\n\r\n\t\t\t++index;\r\n\t\t}\r\n\t}\r\n\r\n    clone() : Filter {\r\n        const element = this.$el.clone(false, false);\r\n        const result = new Filter(element, this.options);\r\n\r\n\t    result.clearClone();\r\n\r\n        return result;\r\n    }\r\n\r\n\tclearClone() : void {\r\n\t\tfor (const row of this._rows) {\r\n\t\t\trow.clearClone();\r\n\t\t}\r\n\t}\r\n\r\n\tupdateControlName(baseName: string) : void {\r\n\t\tlet index = 0;\r\n\r\n\t\tthis.options.baseName = baseName;\r\n\r\n        for (const row of this._rows) {\r\n            row.updateControlName(`${baseName}[${index}]`);\r\n\t\t\t++index;\r\n        }\r\n\r\n\t\tthis._nextIndex = this._rows.length;\r\n    }\r\n}","// @flow\r\nimport {Skeleton} from \"../../../../../js/plugin/skeleton\";\r\nimport {Filter} from \"./filter\";\r\n\r\nexport class FilterCollection extends Skeleton {\r\n\r\n    static defaults = {\r\n        filterElement: '[data-entity=\"filter\"]',\r\n        addFilterElement: '[data-entity=\"addFilter\"]'\r\n    }\r\n\r\n    _filters = [];\r\n\r\n    constructor(element: HTMLElement, options: Object = {}) {\r\n        super(element, options);\r\n\r\n        this.bootFilters();\r\n        this.bootAddButton();\r\n    }\r\n\r\n    bootFilters() : void {\r\n        const elements = this.getElement('filter');\r\n        const filters = [];\r\n\r\n        elements.each((index, element) => {\r\n            const filter = new Filter(element, {\r\n                component: this.options.component,\r\n                signedParameters: this.options.signedParameters,\r\n                fields: this.options.fields,\r\n                baseName: `${this.options.baseName}[${index}]`,\r\n                lang: this.options.lang,\r\n                onDelete: (filter: Filter) => this.delete(filter)\r\n            });\r\n\r\n\t        filter.boot();\r\n\r\n            filters.push(filter);\r\n        });\r\n\r\n        this._filters = filters;\r\n\t    this._nextIndex = filters.length;\r\n    }\r\n\r\n    bootAddButton() : void {\r\n        const element = this.getElement('addFilter');\r\n\r\n        element.on('click', () => this.add());\r\n    }\r\n\r\n    add() : void {\r\n        const lastFilter = this._filters[this._filters.length - 1];\r\n\r\n        if (lastFilter == null) {\r\n            throw new Error('at least one filter must be exists');\r\n        }\r\n\r\n        const newFilter = lastFilter.clone();\r\n\r\n        this.insertFilter(newFilter, lastFilter.$el);\r\n        this.reflowDelete();\r\n    }\r\n\r\n    delete(filter: Filter) : void {\r\n        if (this._filters.length <= 1) { return; }\r\n\r\n\t\tthis.removeFilter(filter);\r\n        this.reflowDelete();\r\n    }\r\n\r\n    insertFilter(filter: Filter, anchor: $) : void {\r\n        filter.$el.insertAfter(anchor);\r\n\t    filter.updateControlName(this.options.baseName + '[' + this._nextIndex + ']');\r\n\t    filter.reset();\r\n\t    filter.boot();\r\n\r\n        this._filters.push(filter);\r\n\r\n        ++this._nextIndex;\r\n    }\r\n\r\n    removeFilter(filter: Filter) : void {\r\n        const filterElement = filter.$el;\r\n        const filterIndex = this._filters.indexOf(filter);\r\n\r\n        if (filterIndex === -1) { throw new Error('cant delete unknown filter'); }\r\n\r\n        filter.destroy();\r\n        filterElement.remove();\r\n\r\n        this._filters.splice(filterIndex, 1);\r\n    }\r\n\r\n    reflowDelete() : void {\r\n        const hasFew = this._filters.length > 1;\r\n\r\n        for (const filter of this._filters) {\r\n            filter.allowDelete(hasFew);\r\n        }\r\n    }\r\n}"],"names":["compileTemplate","template","replaces","result","key","hasOwnProperty","replaceKey","replaceValue","replace","indexOf","$","window","AvitoJQuery","Skeleton","constructor","element","options","$el","el","this","Object","assign","defaults","data","destroy","getElement","context","method","selector","getElementSelector","getNode","optionKey","getTemplate","option","optionFirstSymbol","substring","html","document","getLang","langKey","lang","langPrefix","BX","message","Transport","component","signedParameters","fetch","action","Promise","resolve","reject","ajax","runComponentAction","mode","then","response","status","Error","catch","queryError","Array","isArray","errors","length","error","ValueSkeleton","_field","_multiple","boot","type","transport","_transport","field","multiple","render","newInput","findInput","oldInput","anchor","findAnchor","attr","copyName","replaceWith","is","find","eq","from","to","fromName","closest","reflow","ValueSelect","stampVariants","templateOptions","select2","selectOptions","needBoot","prop","changedVariants","tokenSeparators","map","join","_renderedOptions","ValueDateTime","onCalendarClick","evt","calendar","node","currentTarget","form","bTime","bHideTime","handleCalendarClick","dir","next","ValueText","tags","nowMultiple","ValueAutocomplete","minimumInputLength","ajaxTransport","params","success","failure","query","term","convertOptions","items","push","id","text","results","Row","onDeleteClick","onDelete","onFieldChange","touchValue","reflowCompare","reflowValue","onCompareChange","_stored","bind","clone","clearClone","unbind","destroyField","handleDeleteClick","handleFieldChange","handleCompareChange","value","val","filter","selectedField","firstAvailable","changed","each","index","selected","disabled","bootValue","_valueUi","isValueMultiple","createValueUi","valueUi","make","findFilter","fields","reset","resetField","resetCompare","focus","allowDelete","toggleClass","updateControlName","baseName","control","controls","currentName","nameLastMatches","exec","newName","bootField","hasClass","on","setTimeout","search","last","get","off","elementNext","removeClass","removeAttr","remove","setLevel","level","previousLevel","addClass","setGlue","glue","fieldElement","compareElement","valueElement","deleteElement","glueElement","Junction","args","onClick","toggle","setCollection","collection","setPrevious","row","previousRow","setNext","nextRow","handleClick","isActive","deactivate","activate","GLUE_OR","renderState","previousJunction","previous","nextJunction","previousActive","nextActive","GLUE_AND","state","JunctionCollection","_collection","add","junction","splice","targetIndex","at","Filter","_rows","initRows","elements","junctions","junctionCollection","rows","delete","_junctionCollection","_nextIndex","bootRows","bootAddButton","bootDeleteButton","lastRow","newRow","insertRow","insertJunction","reflowDelete","insertAfter","_this$_junctionCollec","removeJunction","removeRow","rowIndex","syncJunctionFirst","syncJunctionBefore","rowElement","hasFew","rowsCopy","slice","nextIndex","junctionElement","junctionTemplate","addButtonElement","deleteFilterElement","FilterCollection","_filters","bootFilters","filters","lastFilter","newFilter","insertFilter","removeFilter","filterElement","filterIndex","addFilterElement"],"mappings":"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"}