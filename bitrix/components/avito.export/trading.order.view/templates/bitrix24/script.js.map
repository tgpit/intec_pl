{"version":3,"file":"script.js","sources":["src/factory.js","src/utils.js","src/reference/field.js","src/basket/itemview.js","src/molecules/activity.js","src/basket/field.js","src/property/field.js","src/attention/field.js","src/index.js"],"sourcesContent":["// noinspection JSUnresolvedVariable,JSUnresolvedFunction\r\n\r\nconst BX = window.BX;\r\n\r\nexport default class Factory {\r\n\r\n\tstatic defaults = {\r\n\t\tname: 'avito-export',\r\n\t\tmap: {},\r\n\t}\r\n\r\n\tconstructor(options = {}) {\r\n\t\tthis.options = Object.assign({}, this.constructor.defaults, options);\r\n\t}\r\n\r\n\tregister() {\r\n\t\tif (this.isEditorInitialized()) {\r\n\t\t\tthis.registerEditorMethod();\r\n\t\t} else {\r\n\t\t\tthis.handleEditorInit(true);\r\n\t\t}\r\n\t}\r\n\r\n\tisEditorInitialized() {\r\n\t\treturn BX.UI?.EntityEditorControlFactory?.initialized;\r\n\t}\r\n\r\n\tregisterEditorMethod() {\r\n\t\tBX.UI.EntityEditorControlFactory.registerFactoryMethod(this.options.name, this.build);\r\n\t}\r\n\r\n\thandleEditorInit(dir) {\r\n\t\tBX[dir ? 'addCustomEvent' : 'removeCustomEvent'](window, 'BX.UI.EntityEditorControlFactory:onInitialize', this.onEditorInit);\r\n\t}\r\n\r\n\tonEditorInit = (factory, event) => {\r\n\t\tevent.methods[this.options.name] = this.build;\r\n\t\tthis.handleEditorInit(false);\r\n\t}\r\n\r\n\tbuild = (type, controlId, settings) => {\r\n\t\tconst prefix = this.options.name + '-';\r\n\r\n\t\tif (type.indexOf(prefix) !== 0) { return null; }\r\n\r\n\t\tconst internalType = type.substring(prefix.length);\r\n\r\n\t\tif (!this.options.map.hasOwnProperty(internalType)) { return null; }\r\n\r\n\t\tconst fieldClass = this.options.map[internalType];\r\n\r\n\t\treturn fieldClass.create(controlId, settings);\r\n\t}\r\n}","export function htmlToElement(html, tag = 'div') {\r\n\tconst renderer = document.createElement(tag);\r\n\r\n\trenderer.innerHTML = html;\r\n\r\n\treturn renderer.firstElementChild;\r\n}\r\n\r\nexport function pascalCase(str) {\r\n\treturn str\r\n\t\t.split('_')\r\n\t\t.map((word) => word.substr(0, 1).toUpperCase() + word.substr(1).toLowerCase())\r\n\t\t.join('');\r\n}\r\n\r\nexport function kebabCase(str) {\r\n\treturn str\r\n\t\t.split('_')\r\n\t\t.map((word) =>  word.toLowerCase())\r\n\t\t.join('-');\r\n}\r\n\r\nexport function replaceTemplateVariables(template, variables) {\r\n\tlet result = template;\r\n\r\n\tif (variables == null) { return result; }\r\n\r\n\tfor (const [key, value] of Object.entries(variables)) {\r\n\t\tresult = result.replace('#' + key + '#', value);\r\n\t}\r\n\r\n\treturn result;\r\n}","// noinspection JSUnusedGlobalSymbols,JSUnresolvedVariable,JSUnresolvedFunction\r\n\r\nimport {replaceTemplateVariables} from \"../utils\";\r\n\r\nexport default class Field extends BX.UI.EntityEditorField {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis._hasLayout = false;\r\n\t\tthis.options = this.constructor.defaults != null\r\n\t\t\t? Object.assign({}, this.constructor.defaults)\r\n\t\t\t: {};\r\n\t}\r\n\r\n\tgetMessage(key, replaces = null) {\r\n\t\tlet result = this.constructor.messages[key] || super.getMessage(key);\r\n\r\n\t\tif (replaces != null) {\r\n\t\t\tresult = replaceTemplateVariables(result, replaces);\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tclearLayout() {\r\n\t\tif (!this._hasLayout) { return; }\r\n\r\n\t\tthis.forget();\r\n\r\n\t\tthis._wrapper.innerHTML = '';\r\n\t\tthis._hasLayout = false;\r\n\t}\r\n\r\n\tlayout(options) {\r\n\t\tif (this._hasLayout) { return; }\r\n\r\n\t\tthis.ensureWrapperCreated({});\r\n\t\tthis.adjustWrapper();\r\n\r\n\t\tif (!this.isNeedToDisplay()) {\r\n\t\t\tthis.registerLayout(options);\r\n\t\t\tthis._hasLayout = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.forget();\r\n\r\n\t\tthis._wrapper.innerHTML = '';\r\n\r\n\t\tif (this.isDragEnabled()) {\r\n\t\t\tthis._wrapper.appendChild(this.createDragButton());\r\n\t\t}\r\n\r\n\t\tif (this.useTitle()) {\r\n\t\t\tconst title = this.getTitle();\r\n\t\t\tthis._wrapper.appendChild(this.createTitleNode(title));\r\n\t\t}\r\n\r\n\t\tthis.render(this.getValue());\r\n\r\n\t\tif (this.isContextMenuEnabled()) {\r\n\t\t\tthis._wrapper.appendChild(this.createContextMenuButton());\r\n\t\t}\r\n\r\n\t\tif (this.isDragEnabled()) {\r\n\t\t\tthis.initializeDragDropAbilities();\r\n\t\t}\r\n\r\n\t\tthis.registerLayout(options);\r\n\t\tthis._hasLayout = true;\r\n\t}\r\n\r\n\tforget() {}\r\n\r\n\trender(payload) {}\r\n\r\n\tuseTitle() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfewElements(key) {\r\n\t\tconst selector = this.getElementSelector(key);\r\n\t\tlet result;\r\n\r\n\t\tif (selector.indexOf('#') === 0) {\r\n\t\t\tresult = document.querySelectorAll(selector);\r\n\t\t} else {\r\n\t\t\tresult = this.el.querySelectorAll(selector);\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tgetElement(key) {\r\n\t\tconst selector = this.getElementSelector(key);\r\n\t\tlet result;\r\n\r\n\t\tif (selector.indexOf('#') === 0) {\r\n\t\t\tresult = document.querySelector(selector);\r\n\t\t} else {\r\n\t\t\tresult = this.el.querySelector(selector);\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tgetElementSelector(key) {\r\n\t\treturn this.options[key + 'Element'];\r\n\t}\r\n}","// noinspection JSUnresolvedVariable\r\n\r\nimport { htmlToElement, pascalCase, kebabCase } from \"../utils\";\r\n\r\nexport default class ItemView {\r\n\tstatic defaults = {\r\n\t\tmessages: {},\r\n\t\tname: null,\r\n\t\ttitle: null,\r\n\t\tactions: [],\r\n\t\tonChange: null,\r\n\t}\r\n\r\n\tconstructor(options) {\r\n\t\tthis.options = Object.assign({}, this.constructor.defaults, options);\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.options = {};\r\n\t}\r\n\r\n\tgetMessage(key) {\r\n\t\treturn this.options.messages[key] || key;\r\n\t}\r\n\r\n\trender(item, basket) {\r\n\t\tconst columns = Object.keys(basket.COLUMNS);\r\n\r\n\t\tthis.el = htmlToElement(`<tr>\r\n\t\t\t${columns.map((key) => this.renderColumn(item, key)).join('')}\r\n\t\t</tr>`, 'tbody');\r\n\t}\r\n\r\n\tmount(point) {\r\n\t\tpoint.appendChild(this.el);\r\n\t}\r\n\r\n\trenderColumn(item, key) {\r\n\t\tconst method = 'column' + pascalCase(key);\r\n\r\n\t\treturn (\r\n\t\t\tmethod in this\r\n\t\t\t\t? this[method](item, key)\r\n\t\t\t\t: this.columnDefault(item, key)\r\n\t\t);\r\n\t}\r\n\r\n\t// noinspection JSUnusedGlobalSymbols\r\n\tcolumnName(item, key) {\r\n\t\tconst links = {\r\n\t\t\t'SERVICE_URL': 'share',\r\n\t\t\t'CHAT_URL': 'chat',\r\n\t\t};\r\n\r\n\t\treturn `<td class=\"for--${kebabCase(key)}\">\r\n\t\t\t${Object.keys(links)\r\n\t\t\t\t.map((link) => {\r\n\t\t\t\t\tif (!item[link]) { return ''; }\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn `<a class=\"avito-export-link-icon\" href=\"${item[link]}\" target=\"_blank\"><!--\r\n\t\t\t\t\t\t--><img \r\n\t\t\t\t\t\t\t\tclass=\"avito-export-link-icon__icon\"\r\n\t\t\t                   \tsrc=\"/bitrix/js/avitoexport/trading/i/${links[link]}_icon.svg\" \r\n\t\t\t                   \talt=\"\"\r\n\t\t                    /><!--\r\n\t\t\t\t\t--></a>`;\r\n\t\t\t\t})\r\n\t\t\t\t.join('')}\r\n\t\t\t${this.valueFormatted(item, key)}\r\n\t\t</td>`;\r\n\t}\r\n\r\n\t// noinspection JSUnusedGlobalSymbols\r\n\tcolumnPrice(item, key) {\r\n\t\treturn `<td class=\"for--${kebabCase(key)}\">\r\n\t\t\t${this.valueFormatted(item, key)}<br />\r\n\t\t\t<small>${this.getMessage('COMMISSION')}: -${this.valueFormatted(item, 'COMMISSION')}</small>\r\n\t\t\t${this.priceDiscounts(item)}\r\n\t\t</td>`;\r\n\t}\r\n\r\n\tpriceDiscounts(item) {\r\n\t\tlet result = '';\r\n\r\n\t\tif (item['DISCOUNTS'].length > 0) {\r\n\t\t\tresult = `<details>\r\n\t\t\t\t<summary><small>${this.getMessage('DISCOUNT')}: -${this.valueFormatted(item, 'DISCOUNT')}</small></summary>\r\n\t\t\t\t${item['DISCOUNTS']\r\n\t\t\t\t\t.map((discount) => `<small>${discount['TYPE']}:&nbsp;-${discount['VALUE_FORMATTED']}</small><br>`)\r\n\t\t\t\t\t.join('')}\r\n\t\t\t</details>`;\r\n\t\t} else if (item['DISCOUNT'] > 0) {\r\n\t\t\tresult = `<small>${this.getMessage('DISCOUNT')}: -${this.valueFormatted(item, 'DISCOUNT')}</small>`;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// noinspection JSUnusedGlobalSymbols\r\n\tcolumnQuantity(item, key) {\r\n\t\treturn `<td class=\"for--${kebabCase(key)}\">${this.valueFormatted(item, key)} ${this.getMessage('QUANTITY_UNIT')}</td>`;\r\n\t}\r\n\r\n\tcolumnDefault(item, key) {\r\n\t\treturn `<td class=\"for--${kebabCase(key)}\">${this.valueFormatted(item, key)}</td>`;\r\n\t}\r\n\r\n\tvalueFormatted(item, key) {\r\n\t\tconst formattedKey = key + '_FORMATTED';\r\n\t\tlet result = '';\r\n\r\n\t\tif (item[formattedKey] != null) {\r\n\t\t\tresult = item[formattedKey];\r\n\t\t} else if (item[key] != null) {\r\n\t\t\tresult = item[key];\r\n\t\t}\r\n\r\n\t\treturn result !== '' ? result : '&mdash;';\r\n\t}\r\n\r\n\tvalue(item, key) {\r\n\t\treturn item[key];\r\n\t}\r\n}","import {htmlToElement} from \"../utils\";\r\n\r\nexport class Activity {\r\n\r\n\tstatic make(activity: Object, editor) : HTMLElement {\r\n\t\tconst button = htmlToElement(`<button \r\n\t\t\tclass=\"ui-btn ui-btn-sm ${activity.REQUIRED ? 'ui-btn-primary' : ''}\" \r\n\t\t\ttype=\"button\"\r\n\t\t>${activity.TITLE}</button>`);\r\n\t\tconst view = new BX.AvitoExport.Trading.Activity.View.CrmTab(button, {\r\n\t\t\teditor: editor,\r\n\t\t});\r\n\r\n\t\tBX.AvitoExport.Trading.Activity.Factory.make(activity.BEHAVIOR, view, Object.assign({}, activity.UI_OPTIONS ?? {}, {\r\n\t\t\t'title': activity.TITLE,\r\n\t\t\t'confirm': activity.CONFIRM || null, // null converted to string in component parameters\r\n\t\t\t'url': activity.URL,\r\n\t\t}));\r\n\r\n\t\treturn button;\r\n\t}\r\n\r\n}","// noinspection JSUnresolvedVariable\r\n\r\nimport ReferenceField from \"../reference/field\";\r\nimport ItemView from \"./itemview\";\r\nimport { htmlToElement, kebabCase } from \"../utils\";\r\nimport './basket.css';\r\nimport {Activity} from \"../molecules/activity\";\r\n\r\nexport default class Field extends ReferenceField {\r\n\tstatic messages = {}\r\n\tstatic defaults = {\r\n\t\tname: 'BASKET',\r\n\t\tactions: [],\r\n\t}\r\n\r\n\tstatic create(id, settings) {\r\n\t\tconst instance = new Field();\r\n\t\tinstance.initialize(id, settings);\r\n\r\n\t\treturn instance;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.items = [];\r\n\t\tthis.activities = [];\r\n\t}\r\n\r\n\tinitialize(id, settings) : void {\r\n\t\tsuper.initialize(id, settings);\r\n\t\tthis.handleTitleActions(true);\r\n\t}\r\n\r\n\trelease() : void {\r\n\t\tthis.handleTitleActions(false);\r\n\t\tsuper.release();\r\n\t}\r\n\r\n\thandleTitleActions(dir) : void {\r\n\t\tBX[dir ? 'addCustomEvent' : 'removeCustomEvent'](window, 'BX.UI.EntityEditorSection:onLayout', this.onTitleActions);\r\n\t}\r\n\r\n\tonTitleActions = (field, context) : void => {\r\n\t\tif (field !== this.getParent()) { return; }\r\n\r\n\t\tfor (const activity of this.activities) {\r\n\t\t\tconst button = Activity.make(activity, this._editor);\r\n\r\n\t\t\tcontext.customNodes.push(button);\r\n\t\t}\r\n\t}\r\n\r\n\trender(payload) {\r\n\t\tconst basket = payload;\r\n\t\tconst table = this.renderTable(basket);\r\n\t\tconst body = table.querySelector('tbody');\r\n\r\n\t\tthis.activities = payload.ACTIVITIES;\r\n\r\n\t\tthis.renewItems(basket.ROWS).forEach((basketItem, index) => {\r\n\t\t\tbasketItem.render(basket.ROWS[index], basket);\r\n\t\t\tbasketItem.mount(body);\r\n\t\t});\r\n\r\n\t\tthis._wrapper.appendChild(table);\r\n\t}\r\n\r\n\trenewItems(payloadItems) {\r\n\t\tthis.destroyItems();\r\n\r\n\t\treturn this.createItems(payloadItems);\r\n\t}\r\n\r\n\tdestroyItems() {\r\n\t\tfor (const item of this.items) {\r\n\t\t\titem.destroy();\r\n\t\t}\r\n\r\n\t\tthis.items = [];\r\n\t}\r\n\r\n\tcreateItems(payloadItems) {\r\n\t\tlet itemIndex = 0;\r\n\r\n\t\tthis.items = [];\r\n\r\n\t\tfor (const payloadItem of payloadItems) {\r\n\t\t\tthis.items.push(this.createItem());\r\n\t\t\t++itemIndex;\r\n\t\t}\r\n\r\n\t\treturn this.items;\r\n\t}\r\n\r\n\tcreateItem() {\r\n\t\treturn new ItemView({\r\n\t\t\tmessages: Field.messages,\r\n\t\t});\r\n\t}\r\n\r\n\trenderTable(basket) {\r\n\t\treturn htmlToElement(`<div class=\"avito-export-basket\">\r\n\t\t\t<div class=\"avito-export-basket-table-viewport\">\r\n\t\t\t\t<table class=\"avito-export-basket-table\">\r\n\t\t\t\t\t${this.renderHeader(basket)}\r\n\t\t\t\t\t<tbody></tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t\t${this.renderSummary(basket)}\r\n\t\t</div>`);\r\n\t}\r\n\r\n\trenderHeader(basket) {\r\n\t\treturn `<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t${Object.keys(basket.COLUMNS)\r\n\t\t\t\t\t.map((key) => `<td class=\"for--${kebabCase(key)}\">${basket.COLUMNS[key]}</td>`)\r\n\t\t\t\t\t.join('')}\r\n\t\t\t</tr>\r\n\t\t</thead>`;\r\n\t}\r\n\r\n\trenderSummary(basket) {\r\n\t\treturn `<div class=\"avito-export-basket-summary\">\r\n\t\t\t${basket.SUMMARY\r\n\t\t\t\t.map((item) => {\r\n\t\t\t\t\treturn `<div class=\"avito-export-basket-summary__row\">\r\n\t\t\t\t\t\t<div class=\"avito-export-basket-summary__label\">${item['NAME']}:</div>\r\n\t\t\t\t\t\t<div class=\"avito-export-basket-summary__value\">${item['VALUE_FORMATTED']}</div>\r\n\t\t\t\t\t</div>`;\r\n\t\t\t\t})\r\n\t\t\t\t.join('')}\r\n\t\t</div>`;\r\n\t}\r\n}","// noinspection JSUnresolvedVariable\r\n\r\nimport ReferenceField from \"../reference/field\";\r\n\r\nexport default class Field extends ReferenceField {\r\n\tstatic messages = {}\r\n\r\n\tstatic create(id, settings) {\r\n\t\tconst instance = new Field();\r\n\t\tinstance.initialize(id, settings);\r\n\r\n\t\treturn instance;\r\n\t}\r\n\r\n\tuseTitle() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\trender(payload) {\r\n\t\tconst html = this.build(payload);\r\n\r\n\t\tthis._wrapper.insertAdjacentHTML('beforeend', html);\r\n\t}\r\n\r\n\tbuild(payload) {\r\n\t\treturn `<div class=\"ui-entity-editor-content-block\">\r\n\t\t\t<div class=\"ui-entity-editor-content-block-text\">\r\n\t\t\t\t${payload['VALUE']}\r\n\t\t\t</div>\r\n\t\t</div>`;\r\n\t}\r\n}","// noinspection JSUnresolvedVariable\r\n\r\nimport ReferenceField from \"../reference/field\";\r\nimport './attention.css';\r\nimport {htmlToElement} from \"../utils\";\r\nimport {Activity} from \"../molecules/activity\";\r\n\r\nexport default class Field extends ReferenceField {\r\n\r\n\tstatic defaults = {}\r\n\r\n\tstatic create(id, settings) {\r\n\t\tconst instance = new Field();\r\n\t\tinstance.initialize(id, settings);\r\n\r\n\t\treturn instance;\r\n\t}\r\n\r\n\trender(value) {\r\n\t\tthis.renderMessages(value['MESSAGES']);\r\n\t\tthis.renderActivities(value['ACTIVITIES']);\r\n\t}\r\n\r\n\trenderMessages(messages) : void {\r\n\t\tif (!Array.isArray(messages) || messages.length === 0) { return; }\r\n\r\n\t\tconst html = messages.map((one) => `<div class=\"ui-alert ui-alert-${one.type}\"><div>${one.text}</div></div>`).join('');\r\n\r\n\t\tthis._wrapper.insertAdjacentHTML('beforeend', html);\r\n\t}\r\n\r\n\trenderActivities(activities) : void {\r\n\t\tif (!Array.isArray(activities) || activities.length === 0) { return; }\r\n\r\n\t\tconst fragment = htmlToElement(`<div class=\"avito-export-activity-buttons\"></div>`);\r\n\t\tlet alert = this._wrapper.querySelector('.ui-alert');\r\n\r\n\t\tif (alert === null)\r\n\t\t{\r\n\t\t\talert = htmlToElement('<div class=\"ui-alert ui-alert-info\"></div>');\r\n\t\t\tthis._wrapper.insertAdjacentElement('beforeend', alert);\r\n\t\t}\r\n\r\n\t\tactivities.forEach((activity) => {\r\n\t\t\tfragment.insertAdjacentElement(\r\n\t\t\t\t'beforeend',\r\n\t\t\t\tActivity.make(activity, this._editor)\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\talert.insertAdjacentElement('beforeend', fragment);\r\n\t}\r\n}","import Factory from \"./factory\";\r\nimport Basket from \"./basket/field\";\r\nimport Property from \"./property/field\";\r\nimport Attention from \"./attention/field\";\r\nimport './common.css';\r\n\r\n// factory\r\n\r\nconst factory = new Factory({\r\n\tmap: {\r\n\t\tattention: Attention,\r\n\t\tbasket: Basket,\r\n\t\tproperty: Property,\r\n\t},\r\n});\r\n\r\nfactory.register();\r\n\r\nexport {\r\n\tAttention,\r\n\tBasket,\r\n\tProperty,\r\n};"],"names":["BX","window","Factory","constructor","options","onEditorInit","factory","event","methods","this","name","build","handleEditorInit","type","controlId","settings","prefix","indexOf","internalType","substring","length","map","hasOwnProperty","create","Object","assign","defaults","register","isEditorInitialized","registerEditorMethod","UI","_BX$UI","EntityEditorControlFactory","_BX$UI$EntityEditorCo","initialized","registerFactoryMethod","dir","htmlToElement","html","tag","renderer","document","createElement","innerHTML","firstElementChild","kebabCase","str","split","word","toLowerCase","join","Field","EntityEditorField","_hasLayout","getMessage","key","replaces","result","messages","super","template","variables","value","entries","replace","replaceTemplateVariables","clearLayout","forget","_wrapper","layout","ensureWrapperCreated","adjustWrapper","isNeedToDisplay","registerLayout","isDragEnabled","appendChild","createDragButton","useTitle","title","getTitle","createTitleNode","render","getValue","isContextMenuEnabled","createContextMenuButton","initializeDragDropAbilities","payload","fewElements","selector","getElementSelector","querySelectorAll","el","getElement","querySelector","ItemView","destroy","item","basket","columns","keys","COLUMNS","renderColumn","mount","point","method","substr","toUpperCase","columnDefault","columnName","links","link","valueFormatted","columnPrice","priceDiscounts","discount","columnQuantity","formattedKey","actions","onChange","Activity","activity","editor","button","REQUIRED","TITLE","view","AvitoExport","Trading","View","CrmTab","make","BEHAVIOR","UI_OPTIONS","CONFIRM","URL","ReferenceField","id","instance","initialize","onTitleActions","field","context","getParent","activities","_editor","customNodes","push","items","handleTitleActions","release","table","renderTable","body","ACTIVITIES","renewItems","ROWS","forEach","basketItem","index","payloadItems","destroyItems","createItems","payloadItem","createItem","renderHeader","renderSummary","SUMMARY","insertAdjacentHTML","renderMessages","renderActivities","Array","isArray","one","text","fragment","alert","insertAdjacentElement","attention","Attention","Basket","property","Property"],"mappings":"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"}